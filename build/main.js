var update_datetime = 20180102213639;function updateSettings(){try{Memory.settings={};if(!Memory.CPU){ManagerCPU.memorySetUp()}updateAssistanceSettings();updateCreepSettings();updateClaimingSettings();updateGatheringSettings();updateGeneralSettings();updateLabSettings();updateMilitarySettings();updatePowerHarvestSettings();updateRoomSettings();updateTowerSettings();let i,a=Game.rooms;for(i in a){if(a.hasOwnProperty(i)){Game.rooms[i].resetSpawnQueues()}}console.log('config_all.updateSettings():  all spawn queues reset');Memory.settings.lastUpdated=update_datetime}catch(ex){console.log('### EXCEPTION - config_all.updateSettings(): '+ex.message)}}function updateAssistanceSettings(){let a={};a.W62S58={isActiveOp:!0,providerRoom:'W64S58',respawnTimeBuffer:350,waypointPrefixIngress:'W62S58_in',creepSpawnGoals:{worker:{num:1,buildLevel:8,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'normal'},upgrader:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};a.W65S53={isActiveOp:!1,providerRoom:'W63S52',respawnTimeBuffer:250,waypointPrefixIngress:'W65S53_in',creepSpawnGoals:{miner:{num:1,buildLevel:8,boosts:[],priority:'normal'},restocker:{num:1,buildLevel:8,boosts:[],priority:'normal'},upgrader:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};Memory.settings.assistance=a}function updateClaimingSettings(){const a={};a.W62S58={isActiveOp:!1,providerRoom:'W64S58',waypointPrefixIngress:'W62S58_in',claimer_buildLevel:3};Memory.settings.claiming=a}function updateCreepSettings(){Memory.settings.creeps={roles:{custom:{peaceTasks:['evacuateResources'],warTasks:['evacuateResources'],buildType:'manager'},miner:{peaceTasks:['backupRestockExtensions','mineEnergy','mineMineral','repairContainers','repairRoads','build','upgrade','wait'],warTasks:['backupRestockTowers','backupRestockExtensions','mineEnergy','mineMineral','wait'],buildType:'worker'},worker:{peaceTasks:['backupRestockExtensions','build','repairContainers','repairRoads','mineEnergy','mineMineral','upgrade','wait'],warTasks:['backupRestockTowers','backupRestockExtensions','repairRoads','repairContainers','mineEnergy','wait'],buildType:'worker'},restocker:{peaceTasks:['backupRestockTowers','restockExtensions','restockLabMinerals','removeLabMinerals','restockLabEnergy','manageMineralsBetweenStorageAndTerminal','repairRoads','repairContainers','collectEnergy','restockNukerEnergy','wait'],warTasks:['backupRestockTowers','restockExtensions','collectEnergy','wait'],buildType:'carrier'},manager:{peaceTasks:['restockTowers','restockSpawn','restockExtensions','restockStorageLink','manageEnergyBalance','restockLabMinerals','removeLabMinerals','restockLabEnergy','restockPowerSpawnEnergy','restockNukerEnergy'],warTasks:['restockTowers','restockSpawn','manageEnergyBalance'],buildType:'manager'},exportWorker:{peaceTasks:['mineEnergy','repairContainers','repairRoads','build'],warTasks:['mineEnergy','repairContainers','repairRoads','build'],buildType:'worker'},exportMaintainer:{peaceTasks:['repairRoads','build','repairContainers','mineEnergy'],warTasks:['build','repairContainers','repairRoads','mineEnergy'],buildType:'worker'},exportCarrier:{peaceTasks:['export'],warTasks:['export'],buildType:'manager'},upgrader:{peaceTasks:['upgrade','repairRoads','build','mineEnergy','mineMineral'],warTasks:['backupRestockTowers','backupRestockExtensions','mineEnergy','upgrade'],buildType:'worker'},keeperKiller:{peaceTasks:['killKeepers'],warTasks:['killKeepers'],buildType:'keeperKiller'},invaderStopperKiller:{peaceTasks:['wait'],warTasks:['stopInvaders'],buildType:'invaderStopperKiller'},invaderStopperHealer:{peaceTasks:['healWounded','wait'],warTasks:['supportInvaderStopper','healWounded','wait'],buildType:'invaderStopperHealer'},invaderStopperMulti:{peaceTasks:['stopInvaders','healWounded','wait'],warTasks:['stopInvaders'],buildType:'invaderStopperMulti'},claimer:{peaceTasks:['claim'],warTasks:['claim'],buildType:'claimer'},reserver:{peaceTasks:['reserve'],warTasks:['reserve'],buildType:'reserver'},powerKiller:{peaceTasks:['killPowerBank'],warTasks:['killPowerBank'],buildType:'powerKiller'},powerHealer:{peaceTasks:['healPowerKiller'],warTasks:['healPowerKiller'],buildType:'powerHealer'},powerTank:{peaceTasks:['storePower'],warTasks:['storePower'],buildType:'portableContainer'},powerMover:{peaceTasks:['exportPower'],warTasks:['exportPower'],buildType:'manager'},militaryAttacker:{peaceTasks:['breach','destroy','fight','raze'],warTasks:['raze'],buildType:'pureAttacker'},militaryHealer:{peaceTasks:['battleHeal'],warTasks:['battleHeal'],buildType:'powerHealer'},militaryDemolisher:{peaceTasks:['breach','destroy','raze'],warTasks:['breach','destroy','raze'],buildType:'pureWorker'},militarySentry:{peaceTasks:['destroy','fight','wait'],warTasks:['destroy','fight','wait'],buildType:'sentry'},evacuator:{peaceTasks:['evacuateResources'],warTasks:['evacuateResources'],buildType:'manager'}},buildTypes:{worker:{1:{parts:[WORK,WORK,CARRY,MOVE],cost:300},2:{parts:[WORK,WORK,WORK,CARRY,MOVE,MOVE,MOVE],cost:500},3:{parts:[WORK,WORK,WORK,WORK,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE],cost:700},4:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1050},5:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1750},6:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2100},7:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:3500},8:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:3500}},carrier:{1:{parts:[CARRY,CARRY,CARRY,MOVE,MOVE,MOVE],cost:300},2:{parts:[WORK,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE],cost:450},3:{parts:[WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:750},4:{parts:[WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1150},5:{parts:[WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1650},6:{parts:[WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2050},7:{parts:[WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2600},8:{parts:[WORK,WORK,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2600}},manager:{1:{parts:[CARRY,CARRY,CARRY,MOVE,MOVE,MOVE],cost:300},2:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE],cost:500},3:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:800},4:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1300},5:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1800},6:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2300},7:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2500},8:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2500}},portableContainer:{1:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:300},2:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:500},3:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:800},4:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:1300},5:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:1800},6:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:2300},7:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:2500},8:{parts:[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,MOVE],cost:2500}},sentry:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE,MOVE,ATTACK,HEAL],cost:430},3:{parts:[MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,HEAL],cost:690},4:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,HEAL],cost:1150},5:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,HEAL,HEAL],cost:1600},6:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK],cost:2000},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK],cost:2000},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK],cost:2000}},keeperKiller:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[MOVE],cost:50},7:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,HEAL,HEAL,HEAL,HEAL,HEAL],cost:3750},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,HEAL,HEAL,HEAL,HEAL,HEAL],cost:4100}},invaderStopperKiller:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[MOVE],cost:50},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK],cost:3740},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK],cost:3740}},invaderStopperHealer:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL,HEAL,HEAL,HEAL],cost:2100},7:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL],cost:3600},8:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL],cost:5100}},invaderStopperMulti:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE,MOVE,ATTACK,HEAL],cost:430},3:{parts:[MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,HEAL],cost:690},4:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,HEAL],cost:1150},5:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,HEAL,HEAL],cost:1580},6:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,RANGED_ATTACK,HEAL,HEAL],cost:2040},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,HEAL,HEAL,HEAL],cost:2800},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,HEAL,HEAL,HEAL,HEAL],cost:3490}},powerKiller:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[MOVE],cost:50},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK],cost:3150},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK],cost:3150}},powerHealer:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[MOVE],cost:50},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL],cost:4500},8:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL,HEAL],cost:5100}},claimer:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[CLAIM,MOVE],cost:650},4:{parts:[CLAIM,MOVE],cost:650},5:{parts:[CLAIM,MOVE,MOVE,HEAL],cost:1050},6:{parts:[TOUGH,CLAIM,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL],cost:1310},7:{parts:[TOUGH,CLAIM,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL],cost:1310},8:{parts:[TOUGH,CLAIM,MOVE,MOVE,MOVE,MOVE,HEAL,HEAL],cost:1310}},reserver:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[CLAIM,CLAIM,MOVE,MOVE],cost:1300},5:{parts:[CLAIM,CLAIM,MOVE,MOVE],cost:1300},6:{parts:[CLAIM,CLAIM,CLAIM,MOVE,MOVE,MOVE],cost:1950},7:{parts:[CLAIM,CLAIM,CLAIM,CLAIM,CLAIM,CLAIM,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:3900},8:{parts:[CLAIM,CLAIM,CLAIM,CLAIM,CLAIM,CLAIM,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:3900}},pureWorker:{1:{parts:[WORK,WORK,MOVE,MOVE],cost:300},2:{parts:[WORK,WORK,WORK,MOVE,MOVE,MOVE],cost:450},3:{parts:[WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE],cost:600},4:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1050},5:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:1650},6:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:2100},7:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:4000},8:{parts:[WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,WORK,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE],cost:4600}},pureAttacker:{1:{parts:[MOVE],cost:50},2:{parts:[MOVE],cost:50},3:{parts:[MOVE],cost:50},4:{parts:[MOVE],cost:50},5:{parts:[MOVE],cost:50},6:{parts:[TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,TOUGH,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK],cost:1270},7:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK],cost:3250},8:{parts:[MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,MOVE,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK,ATTACK],cost:3250}}}}}function updateGatheringSettings(){const a={};a.W62S58={isActiveOp:!1,providerRoom:'W64S58',respawnTimeBuffer:100,mineMineral:!1,exportTargetId:'',waypointPrefixIngress:'W62S58_in',waypointPrefixEgress:'W62S58_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'high'}}};a.W63S58={isActiveOp:!0,providerRoom:'W64S58',respawnTimeBuffer:120,mineMineral:!1,exportTargetId:'5895e6eb9f5452d870f75e7d',waypointPrefixIngress:'W63S58_in',waypointPrefixEgress:'W63S58_out',reserveController:!0,reserverBuildLevel:6,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:6,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'}}};a.W64S52={isActiveOp:!0,providerRoom:'W63S52',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'5987635fb0a9d427e15ca45d',waypointPrefixIngress:'W64S52_in',waypointPrefixEgress:'W64S52_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};a.W64S55={isActiveOp:!1,providerRoom:'W63S56',respawnTimeBuffer:250,mineMineral:!1,exportTargetId:'5895ea91d956e6a11ce07fa7',waypointPrefixIngress:'W64S55_in',waypointPrefixEgress:'W64S55_out',reserveController:!1,reserverBuildLevel:1,reservationTickBuffer:0,creepSpawnGoals:{exportWorker:{num:2,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:6,boosts:[],priority:'normal'},exportCarrier:{num:3,buildLevel:8,boosts:[],priority:'normal'},keeperKiller:{num:1,buildLevel:8,boosts:[],priority:'high'},invaderStopperKiller:{num:1,buildLevel:8,boosts:[],priority:'normal'},invaderStopperHealer:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};a.W64S56={isActiveOp:!0,providerRoom:'W63S56',respawnTimeBuffer:250,mineMineral:!1,exportTargetId:'5895ea91d956e6a11ce07fa7',waypointPrefixIngress:'W64S56_in',waypointPrefixEgress:'W64S56_out',reserveController:!1,reserverBuildLevel:1,reservationTickBuffer:0,creepSpawnGoals:{exportWorker:{num:2,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:4,buildLevel:8,boosts:[],priority:'normal'},keeperKiller:{num:1,buildLevel:8,boosts:[],priority:'high'},invaderStopperKiller:{num:1,buildLevel:8,boosts:[],priority:'normal'},invaderStopperHealer:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};a.W64S59={isActiveOp:!0,providerRoom:'W64S58',respawnTimeBuffer:150,mineMineral:!1,exportTargetId:'5895e6eb9f5452d870f75e7d',waypointPrefixIngress:'W64S59_in',waypointPrefixEgress:'W64S59_out',reserveController:!0,reserverBuildLevel:6,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'},invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'normal'}}};a.W65S52={isActiveOp:!0,providerRoom:'W65S53',respawnTimeBuffer:150,mineMineral:!1,exportTargetId:'59e2ec95e4ca1231bbcd561a',waypointPrefixIngress:'W65S52_in',waypointPrefixEgress:'W65S52_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:5,boosts:[],priority:'normal'},exportCarrier:{num:1,buildLevel:8,boosts:[],priority:'normal'},invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'normal'}}};a.W65S57={isActiveOp:!1,providerRoom:'W64S58',respawnTimeBuffer:150,mineMineral:!1,exportTargetId:'58957b3cefe97e023f966ae4',waypointPrefixIngress:'W65S57_in',waypointPrefixEgress:'W65S57_out',reserveController:!0,reserverBuildLevel:6,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:2,boosts:[],priority:'normal'},exportCarrier:{num:3,buildLevel:8,boosts:[],priority:'normal'},invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'high'}}};a.W66S51={isActiveOp:!0,providerRoom:'W67S51',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'58b90a183aa9ab6a7d99b465',waypointPrefixIngress:'W66S51_in',waypointPrefixEgress:'W66S51_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'},invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'normal'}}};a.W67S57={isActiveOp:!0,providerRoom:'W68S58',respawnTimeBuffer:250,mineMineral:!1,exportTargetId:'5897fbaccce2ec2447fba7a8',waypointPrefixIngress:'W67S57_in',waypointPrefixEgress:'W67S57_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'}}};a.W67S58={isActiveOp:!0,providerRoom:'W67S59',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'58e1645550b1511e19606510',waypointPrefixIngress:'W67S58_in',waypointPrefixEgress:'W67S58_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:1,buildLevel:8,boosts:[],priority:'normal'}}};a.W68S56={isActiveOp:!0,providerRoom:'W67S56',respawnTimeBuffer:100,mineMineral:!1,exportTargetId:'',waypointPrefixIngress:'W68S56_in',waypointPrefixEgress:'W68S56_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{invaderStopperMulti:{num:1,buildLevel:1,boosts:[],priority:'normal'}}};a.W68S57={isActiveOp:!0,providerRoom:'W67S56',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'591c1ae3a86eb31a55f52235',waypointPrefixIngress:'W68S57_in',waypointPrefixEgress:'W68S57_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'}}};a.W69S52={isActiveOp:!0,providerRoom:'W69S51',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'589fc8a0f996b11842b9e0bd',waypointPrefixIngress:'W69S52_in',waypointPrefixEgress:'W69S52_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:4,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'},invaderStopperMulti:{num:1,buildLevel:6,boosts:[],priority:'normal'}}};a.W69S53={isActiveOp:!0,providerRoom:'W68S53',respawnTimeBuffer:200,mineMineral:!1,exportTargetId:'58a306462f1b21053d4755af',waypointPrefixIngress:'W69S53_in',waypointPrefixEgress:'W69S53_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportMaintainer:{num:1,buildLevel:4,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'}}};a.W69S55={isActiveOp:!0,providerRoom:'W69S57',respawnTimeBuffer:100,mineMineral:!1,exportTargetId:'',waypointPrefixIngress:'W69S55_in',waypointPrefixEgress:'W69S55_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{invaderStopperMulti:{num:1,buildLevel:1,boosts:[],priority:'normal'}}};a.W69S56={isActiveOp:!0,providerRoom:'W69S57',respawnTimeBuffer:170,mineMineral:!1,exportTargetId:'5895fb1c2139fcc82704b53c',waypointPrefixIngress:'W69S56_in',waypointPrefixEgress:'W69S56_out',reserveController:!0,reserverBuildLevel:5,reservationTickBuffer:3000,creepSpawnGoals:{exportWorker:{num:1,buildLevel:8,boosts:[],priority:'normal'},exportCarrier:{num:2,buildLevel:8,boosts:[],priority:'normal'}}};Memory.settings.gathering=a}function updateGeneralSettings(){const a={};a.usernames=['Mal','Mal_Local'];a.peace=[];a.allies=[];a.terminalsDistributeMinerals=!0;a.terminalsDistributeEnergy=!0;a.terminalsToExclude=[];a.evacuateResources=[];a.roomsToEvacuate=[];Memory.settings.general=a}function updateLabSettings(){const a={};a.W63S52={'59adfe4ef76ca03a8c3e9b7f':{role:'input',mineral:'GHO2'},'59ae8bdd4957a47fd4f9cbc4':{role:'input',mineral:'GH2O'},'59aed982191fe12a03a7d107':{role:'input',mineral:'ZHO2'},'59e08b0a63521058b8ce55ec':{role:'input',mineral:'X'},'59ae317534e39f7eb2503e98':{role:'output',mineral:'XGHO2'},'59ae779a2ecb1103cb51dff9':{role:'output',mineral:'XGH2O'},'59aec5772a57c2181edeeae9':{role:'output',mineral:'XZHO2'},'59e1a3df2f1fa167fa361210':{role:'booster',mineral:'none'},'59e17cd77e7fad4fa8dda607':{role:'booster',mineral:'none'},'58994785cb5d2445ddb50e21':{role:'booster',mineral:'none'}};a.W63S56={'58998430d5e6bd7b2e9b3d33':{role:'input',mineral:'KO'},'58992252748a0f047a79140a':{role:'input',mineral:'ZH'},'5898613176e57bd91364d1c8':{role:'input',mineral:'GH'},'589d488e1ab5134f3a3aa8a6':{role:'input',mineral:'OH'},'589a07208b8fcc1e35b478cc':{role:'output',mineral:'none'},'5899c1520dae50796e691c3f':{role:'output',mineral:'none'},'58982270f67e40735beb26e8':{role:'output',mineral:'GH2O'},'589a95128c1c3bbe681d65ee':{role:'booster',mineral:'XLHO2'},'5898bee0a56afe276c1b2f1d':{role:'booster',mineral:'XGHO2'},'58994785cb5d2445ddb50e21':{role:'booster',mineral:'XZHO2'}};a.W64S58={'5888758d1a68eb155f962bd4':{role:'input',mineral:'LO'},'5887e555d21848fb182e43c6':{role:'input',mineral:'GO'},'5886dca620bdfc2e15a64cb9':{role:'input',mineral:'ZO'},'589db5a62ae31767063fc0f6':{role:'input',mineral:'OH'},'5888a518c940547a503a6852':{role:'output',mineral:'LHO2'},'588852da04b882cc73bd63b2':{role:'output',mineral:'GHO2'},'5886b64a0851ffbc7d216941':{role:'output',mineral:'ZHO2'},'589872fd34f4c344244866e3':{role:'booster',mineral:'XGHO2'},'5899befbb966a25d33c9ff7a':{role:'booster',mineral:'XZHO2'},'5899b38831425b6e505d9cff':{role:'booster',mineral:'XUH2O'}};a.W65S53={asdfg1:{role:'input',mineral:'none'},asdfg2:{role:'input',mineral:'none'},asdfg3:{role:'input',mineral:'none'},asdfg4:{role:'input',mineral:'none'},asdfg5:{role:'output',mineral:'none'},asdfg6:{role:'output',mineral:'none'},asdfg7:{role:'output',mineral:'none'},'5a24282f4284ed297bb14961':{role:'booster',mineral:'XGH2O'},asdfg9:{role:'booster',mineral:'none'},asdfg10:{role:'booster',mineral:'none'}};a.W66S59={'58ff53c3a63dc82f36ba9598':{role:'input',mineral:'UH2O'},'58ce6ea5aa0c2b6815ac731e':{role:'input',mineral:'LHO2'},'58bf33da2048c52f60b70450':{role:'input',mineral:'GH2O'},'58be55aa7ee5b3ca64b9ddd6':{role:'input',mineral:'X'},'58ff937b0305ce4157ba5326':{role:'output',mineral:'XUH2O'},'58cebefee6cf6ce45c77fbbb':{role:'output',mineral:'none'},'58bf5328a99218fb0603eff7':{role:'output',mineral:'XGH2O'},'58ff6c2ea78b2476ef903865':{role:'booster',mineral:'XGHO2'},'58cce46b2bdf1daf6bdb56e9':{role:'booster',mineral:'XZHO2'},'58fed2fa8551193443cd96d7':{role:'booster',mineral:'XKHO2'}};a.W67S51={'58c1f5d2b3072a631a06e3e5':{role:'input',mineral:'K'},'58d29a0ff18fad096788ef9f':{role:'input',mineral:'Z'},'592266e86540820b1edf008d':{role:'input',mineral:'U'},'58c28bfd24d078f728b0cd89':{role:'input',mineral:'H'},'58c23cf5ef60bf635e0985ec':{role:'output',mineral:'none'},'58d2c12b00806f34b2a3f5a8':{role:'output',mineral:'none'},'5922b673095606680a398fe3':{role:'output',mineral:'none'},'59221b3e6445988a34d75f14':{role:'booster',mineral:'XGHO2'},'58d274833acba1411f3e37a7':{role:'booster',mineral:'XZHO2'},'592224d52a197e66e0e7bb79':{role:'booster',mineral:'XLHO2'}};a.W67S56={'59559906b54bc138155ae7e4':{role:'input',mineral:'KHO2'},'59554829afd43f640707f599':{role:'input',mineral:'ZH2O'},'59875ed47d290379845d4250':{role:'input',mineral:'ZHO2'},'59556319bf6bc06785554e5b':{role:'input',mineral:'X'},'59559eeebccc661864631afc':{role:'output',mineral:'XKHO2'},'594103754c36be480df00a2c':{role:'output',mineral:'XZH2O'},'59879c21b19b5711957ef3d5':{role:'output',mineral:'XZHO2'},'595572463761db657009b1d2':{role:'booster',mineral:'XGHO2'},'5987f1989779351cbd84b977':{role:'booster',mineral:'XZHO2'},'5988f0c01178603c7f56716a':{role:'booster',mineral:'XKHO2'}};a.W67S59={'58e1f491bbed087f3f541ec3':{role:'input',mineral:'KH'},'58f1da4e09f5da252b0146f2':{role:'input',mineral:'UH'},'594b97dbbaa7f4456246f0e3':{role:'input',mineral:'LH'},'58e24edeb4aed8630a3f34c3':{role:'input',mineral:'OH'},'58e1639f866bbe2a7cc698db':{role:'output',mineral:'KH2O'},'58f1f690cc5d4a6307aef3e1':{role:'output',mineral:'UH2O'},'594b344f4dc87d816ed3de10':{role:'output',mineral:'LH2O'},'58f1a3502cd70b5e49b9a10b':{role:'booster',mineral:'XGHO2'},'594a878d05430905af554c46':{role:'booster',mineral:'XZHO2'},'594a9fd9cd57204f7c96fd61':{role:'booster',mineral:'XUH2O'}};a.W68S53={'593fc85d5be96ad95e25003c':{role:'input',mineral:'Z'},'58d4b4b66f86d23629bd58a2':{role:'input',mineral:'L'},'58b5eacd0b84992ae186bd33':{role:'input',mineral:'G'},'58b6689aa5e5777680f9ac63':{role:'input',mineral:'O'},'593ff54e6734fc9a6f5526e8':{role:'output',mineral:'none'},'58d5b7c82ea225f81ae2a5a5':{role:'output',mineral:'LO'},'58b622c85c4a12441a0d340b':{role:'output',mineral:'GO'},'593fa631d169e53ed76871cf':{role:'booster',mineral:'XGHO2'},'593f4f978b52b4835359e69e':{role:'booster',mineral:'XZHO2'},'58d3be57b621838e6b344504':{role:'booster',mineral:'XUH20'}};a.W68S58={'589c9b41659688e24adae31c':{role:'middle',mineral:'ZK'},'589ac5b2accb3f5407bbb376':{role:'input',mineral:'K'},'5899db2497b2a6984784fbf3':{role:'input',mineral:'Z'},'589b369cdd45897125359466':{role:'middle',mineral:'UL'},'589a6dc9f773b571e3ae3d3f':{role:'input',mineral:'L'},'589a1fa3d1eee08972ae5d0f':{role:'input',mineral:'U'},'589b679618b4eeb775cb26de':{role:'output',mineral:'G'},'589ba53e18f2da661a8955b3':{role:'booster',mineral:'XGHO2'},'58995d252f87e65a5effed17':{role:'booster',mineral:'XZHO2'},'58986b5773733e2a2ec0f35e':{role:'booster',mineral:'XLHO2'}};a.W69S51={'58f6fffef24f287b577317a0':{role:'input',mineral:'K'},'58b5e3dd9702c66116ade85b':{role:'input',mineral:'U'},'58aa2056d832094c476b3ded':{role:'input',mineral:'H'},'58aa39682048c52f60b105b3':{role:'input',mineral:'O'},'58f7476ede1b0916536b00b6':{role:'output',mineral:'none'},'58b6056b768cb73d10bbe715':{role:'output',mineral:'none'},'58aa571283937ad2274e4427':{role:'output',mineral:'OH'},'58f7e369f3d0f1a7071dd2fd':{role:'booster',mineral:'XGHO2'},'58b64ec283c5c6052d53d025':{role:'booster',mineral:'XZHO2'},'58f7a45212a81a8778c6b4e2':{role:'booster',mineral:'XZH2O'}};a.W69S57={'589c978ac2a7e6bd227e13be':{role:'input',mineral:'G'},'58a5de7991ef31335345d22c':{role:'input',mineral:'O'},'58ed0b479eaa37561ec3cae8':{role:'input',mineral:'L'},'589cc73d86119a1894cf59c6':{role:'input',mineral:'H'},'589d1a712de712f91e9569fe':{role:'output',mineral:'GH'},'58a5fda4a3b02c653ddbb912':{role:'output',mineral:'OH'},'58ed29b6d0878cd05fa28d0f':{role:'output',mineral:'none'},'58a5af77afccd0327df769dd':{role:'booster',mineral:'XGHO2'},'58ed0657e20a3ecb7de12fe0':{role:'booster',mineral:'XZHO2'},'58eccbb9e13ae74a0f8f38c8':{role:'booster',mineral:'XZH2O'}};Memory.settings.labs=a}function updateMilitarySettings(){const a={};a.secureTheEast={isActiveOp:!1,providerRoom:'W63S56',respawnTimeBuffer:550,waypointPrefixIngress:'Davaned_2',creepSpawnGoals:{militaryHealer:{num:0,buildLevel:8,boosts:[],priority:'high'},militaryDemolisher:{num:3,buildLevel:8,boosts:['XZHO2'],priority:'high'}},targetPlayers:[],orders:{breach:['5981687884331157a0a5a803'],destroy:['582cf9a9d88824a276f7173e']}};a.Davaned={isActiveOp:!1,providerRoom:'W66S59',respawnTimeBuffer:400,waypointPrefixIngress:'Davaned',creepSpawnGoals:{militaryHealer:{num:0,buildLevel:8,boosts:[],priority:'high'},militaryDemolisher:{num:3,buildLevel:8,boosts:['XZHO2'],priority:'high'}},targetPlayers:[],orders:{breach:['59facfdbd675cb58061be9e9'],destroy:['58ed4b00d25ffa5962953540']}};Memory.settings.military=a}function updatePowerHarvestSettings(){const a={};a.W70S52={isActiveOp:!1,providerRoom:'W69S51',respawnTimeBuffer:300,exportTargetId:'589fc8a0f996b11842b9e0bd',waypointPrefixIngress:'W70S52_in',waypointPrefixEgress:'W70S52_out',creepSpawnGoals:{powerKiller:{num:1,buildLevel:7,boosts:[],priority:'normal'},powerHealer:{num:3,buildLevel:7,boosts:[],priority:'normal'},powerTank:{num:0,buildLevel:8,boosts:[],priority:'normal'},powerMover:{num:0,buildLevel:8,boosts:[],priority:'normal'}}};Memory.settings.powerharvest=a}function updateRoomSettings(){const a={};a.default={defence_repair_threshold:1,critical_energy_threshold:1000,high_energy_threshold:10000,respawnTimeBuffer:0,creepSpawnGoals:{worker:{num:0,buildLevel:8,boosts:[],priority:'normal'}},defensive_centre:{x:25,y:25},fire_zones:[{topleft:{x:0,y:0},bottomRight:{x:49,y:49}}]};a.W62S58={defence_repair_threshold:4000000,critical_energy_threshold:50000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'}},defensive_centre:{x:28,y:24},fire_zones:[{topleft:{x:1,y:1},bottomRight:{x:48,y:48}}]};a.W63S52={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:5,boosts:[],priority:'normal'},miner:{num:1,buildLevel:6,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:17,y:32},fire_zones:[{topleft:{x:6,y:24},bottomRight:{x:23,y:37}}]};a.W63S56={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:8,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:22,y:20},fire_zones:[{topleft:{x:9,y:10},bottomRight:{x:34,y:32}},{topleft:{x:4,y:6},bottomRight:{x:9,y:12}}]};a.W64S58={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{worker:{num:1,buildLevel:5,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:2,buildLevel:8,boosts:[],priority:'high'},manager:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:1,boosts:[],priority:'normal'}},defensive_centre:{x:22,y:27},fire_zones:[{topleft:{x:15,y:21},bottomRight:{x:27,y:32}},{topleft:{x:8,y:8},bottomRight:{x:46,y:43}}]};a.W65S53={defence_repair_threshold:12000000,critical_energy_threshold:25000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:6,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:25,y:26},fire_zones:[{topleft:{x:12,y:14},bottomRight:{x:31,y:31}},{topleft:{x:3,y:9},bottomRight:{x:47,y:46}}]};a.W66S59={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:150,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:5,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:26,y:25},fire_zones:[{topleft:{x:16,y:18},bottomRight:{x:35,y:30}},{topleft:{x:3,y:16},bottomRight:{x:48,y:38}}]};a.W67S51={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:5,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:25,y:23},fire_zones:[{topleft:{x:19,y:17},bottomRight:{x:33,y:30}},{topleft:{x:10,y:8},bottomRight:{x:42,y:39}}]};a.W67S56={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:6,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:34,y:22},fire_zones:[{topleft:{x:17,y:5},bottomRight:{x:44,y:34}},{topleft:{x:4,y:31},bottomRight:{x:26,y:42}}]};a.W67S59={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:120,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:5,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:29,y:25},fire_zones:[{topleft:{x:25,y:19},bottomRight:{x:39,y:34}},{topleft:{x:9,y:9},bottomRight:{x:49,y:49}}]};a.W68S53={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:8,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:30,y:25},fire_zones:[{topleft:{x:23,y:17},bottomRight:{x:38,y:31}},{topleft:{x:8,y:9},bottomRight:{x:46,y:47}}]};a.W68S58={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:8,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:26,y:12},fire_zones:[{topleft:{x:13,y:3},bottomRight:{x:37,y:24}},{topleft:{x:4,y:3},bottomRight:{x:45,y:42}}]};a.W69S51={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:70,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:6,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'high'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:32,y:24},fire_zones:[{topleft:{x:29,y:19},bottomRight:{x:39,y:30}},{topleft:{x:12,y:7},bottomRight:{x:46,y:37}}]};a.W69S57={defence_repair_threshold:18000000,critical_energy_threshold:200000,high_energy_threshold:400000,respawnTimeBuffer:100,creepSpawnGoals:{manager:{num:1,buildLevel:8,boosts:[],priority:'high'},restocker:{num:1,buildLevel:8,boosts:[],priority:'high'},worker:{num:1,buildLevel:8,boosts:[],priority:'normal'},miner:{num:1,buildLevel:8,boosts:[],priority:'normal'},upgrader:{num:1,buildLevel:5,boosts:[],priority:'normal'}},defensive_centre:{x:29,y:29},fire_zones:[{topleft:{x:13,y:23},bottomRight:{x:40,y:37}},{topleft:{x:2,y:5},bottomRight:{x:40,y:44}}]};Memory.settings.room=a}function updateTowerSettings(){const a={};a.default={isLead:!0,leaderId:null,target_areas:[{topleft:{x:1,y:1},bottomRight:{x:48,y:24}},{topleft:{x:1,y:25},bottomRight:{x:48,y:48}}]};Memory.settings.tower={}}Room.prototype.objectType=()=>'Room';RoomPosition.prototype.objectType=()=>'RoomPosition';RoomObject.prototype.objectType=()=>'RoomObject';ConstructionSite.prototype.objectType=()=>'ConstructionSite';Creep.prototype.objectType=()=>'Creep';Flag.prototype.objectType=()=>'Flag';Mineral.prototype.objectType=()=>'Mineral';Resource.prototype.objectType=()=>'Resource';Source.prototype.objectType=()=>'Source';Structure.prototype.objectType=()=>'Structure';StructureContainer.prototype.objectType=()=>'StructureContainer';StructureRoad.prototype.objectType=()=>'StructureRoad';StructureWall.prototype.objectType=()=>'StructureWall';OwnedStructure.prototype.objectType=()=>'OwnedStructure';StructureController.prototype.objectType=()=>'StructureController';StructureExtension.prototype.objectType=()=>'StructureExtension';StructureExtractor.prototype.objectType=()=>'StructureExtractor';StructureKeeperLair.prototype.objectType=()=>'StructureKeeperLair';StructureLab.prototype.objectType=()=>'StructureLab';StructureLink.prototype.objectType=()=>'StructureLink';StructureNuker.prototype.objectType=()=>'StructureNuker';StructureObserver.prototype.objectType=()=>'StructureObserver';StructurePowerBank.prototype.objectType=()=>'StructurePowerBank';StructurePowerSpawn.prototype.objectType=()=>'StructurePowerSpawn';StructureRampart.prototype.objectType=()=>'StructureRampart';StructureSpawn.prototype.objectType=()=>'StructureSpawn';StructureStorage.prototype.objectType=()=>'StructureStorage';StructureTerminal.prototype.objectType=()=>'StructureTerminal';StructureTower.prototype.objectType=()=>'StructureTower';StructurePortal.prototype.objectType=()=>'StructurePortal';if(!Memory.objectMemory){Memory.objectMemory={}}function createMemory(a){try{if(!Memory.objectMemory[a.objectType()]){Memory.objectMemory[a.objectType()]={}}if(!Memory.objectMemory[a.objectType()][a.id]){Memory.objectMemory[a.objectType()][a.id]={}}}catch(ex){console.log('### EXCEPTION - createMemory(): '+ex.message)}}Room.prototype.getMemory=function(){try{if(!this.memory){createMemory(this);this.memory=Memory.objectMemory[this.objectType()][this.id]}return this.memory}catch(ex){console.log('### EXCEPTION - Room.prototype.getMemory: '+ex.message)}};RoomObject.prototype.getMemory=function(){try{if(!this.memory){createMemory(this);this.memory=Memory.objectMemory[this.objectType()][this.id]}return this.memory}catch(ex){console.log('### EXCEPTION - RoomObject.prototype.getMemory: '+ex.message)}};Creep.prototype.getMemory=function(){try{if(!this.creep_memory){if(Memory.settings.general.usernames.indexOf(this.owner.username)>-1){this.creep_memory=this.memory}else if(!Memory.objectMemory[this.objectType()]||!Memory.objectMemory[this.objectType()][this.id]){createMemory(this);this.creep_memory=Memory.objectMemory[this.objectType()][this.id]}else{this.creep_memory=Memory.objectMemory[this.objectType()][this.id]}}return this.creep_memory}catch(ex){console.log('### EXCEPTION - Creep.prototype.getMemory: '+ex.message)}};StructureSpawn.prototype.getMemory=function(){try{if(!this.spawn_memory){if(Memory.settings.general.usernames.indexOf(this.owner.username)>-1){this.spawn_memory=this.memory}else if(!Memory.objectMemory[this.objectType()]||!Memory.objectMemory[this.objectType()][this.id]){createMemory(this);this.spawn_memory=Memory.objectMemory[this.objectType()][this.id]}else{this.spawn_memory=Memory.objectMemory[this.objectType()][this.id]}}return this.spawn_memory}catch(ex){console.log('### EXCEPTION -StructureSpawn.prototype.getMemory: '+ex.message)}};Creep.prototype.workClass=function(){try{return this.getMemory().work_class}catch(ex){console.log('### EXCEPTION - Creep.prototype.workClass(): '+ex.message)}};Creep.prototype.buildLevel=function(){try{return this.getMemory().build_level}catch(ex){console.log('### EXCEPTION - Creep.prototype.buildLevel(): '+ex.message)}};Creep.prototype.spawnRoom=function(){try{return this.getMemory().spawn_room}catch(ex){console.log('### EXCEPTION - Creep.prototype.spawnRoom(): '+ex.message)}};Creep.prototype.homeRoom=function(a=!1){try{if(!a){return this.getMemory().home_room}else{this.getMemory().home_room=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.homeRoom(): '+ex.message)}};Creep.prototype.role=function(a=!1){try{if(!a){return this.getMemory().role}else{this.getMemory().role=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.role(): '+ex.message)}};Creep.prototype.creepRespawnTimeBuffer=function(a=!1){try{if(!a){return this.getMemory().respawn_buffer}else{this.getMemory().respawn_buffer=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.creepRespawnTimeBuffer(): '+ex.message)}};Creep.prototype.boosts=function(a=!1){try{if(!a){return this.getMemory().boosts}else{this.getMemory().boosts.push(a)}}catch(ex){console.log('### EXCEPTION - Creep.prototype.role(): '+ex.message)}};Creep.prototype.targetGetId=function(a=!1){try{if(!a){if(_.isUndefined(this.getMemory().targetGetId)){this.getMemory().targetGetId=null}if(!this.getMemory().targetGetId){return void 0}return this.getMemory().targetGetId}else{this.getMemory().targetGetId=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetGetId(): '+ex.message)}};Creep.prototype.targetGet=function(a=!1){try{if(!a){if(!this.target_get){this.target_get=Game.getObjectById(this.targetGetId())}return this.target_get}else{this.target_get=a;this.targetGetId(this.target_get.id)}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetGet(): '+ex.message)}};Creep.prototype.hasGetTarget=function(){try{return!!this.targetGet()}catch(ex){console.log('### EXCEPTION - Creep.prototype.hasGetTarget(): '+ex.message)}};Creep.prototype.targetGiveId=function(a=!1){try{if(!a){if(_.isUndefined(this.getMemory().targetGiveId)){this.getMemory().targetGiveId=null}if(!this.getMemory().targetGiveId){return void 0}return this.getMemory().targetGiveId}else{this.getMemory().targetGiveId=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetGiveId(): '+ex.message)}};Creep.prototype.targetGive=function(a=!1){try{if(!a){if(!this.target_give){this.target_give=Game.getObjectById(this.targetGiveId())}return this.target_give}else{this.target_give=a;this.targetGiveId(this.target_give.id)}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetGive(): '+ex.message)}};Creep.prototype.hasGiveTarget=function(){try{return!!this.targetGive()}catch(ex){console.log('### EXCEPTION - Creep.prototype.hasGiveTarget(): '+ex.message)}};Creep.prototype.deallocate=function(a){try{a=a.toLowerCase();if(a==='get'){this.getMemory().targetGetId=null;this.target_get=null}else if(a==='give'){this.getMemory().targetGiveId=null;this.target_give=null}else if(a==='boost'){this.getMemory().targetBoostId=null;this.target_boost=null}else if(a==='all'){this.getMemory().targetGetId=null;this.getMemory().targetGiveId=null;this.getMemory().targetBoostId=null;this.target_get=null;this.target_give=null;this.target_boost=null}}catch(ex){console.log('### EXCEPTION - Creep.prototype.deallocate(): '+ex.message)}};Creep.prototype.targetBoostId=function(a=!1){try{if(!a){if(_.isUndefined(this.getMemory().targetBoostId)){this.getMemory().targetBoostId=null}if(!this.getMemory().targetBoostId){return void 0}return this.getMemory().targetBoostId}else{this.getMemory().targetBoostId=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetBoostId(): '+ex.message)}};Creep.prototype.targetBoost=function(a=!1){try{if(!a){if(!this.target_boost){this.target_boost=Game.getObjectById(this.targetBoostId())}return this.target_boost}else{this.target_boost=a;this.targetBoostId(this.target_boost.id)}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetBoost(): '+ex.message)}};Creep.prototype.hasBoostTarget=function(){try{return!!this.targetBoost()}catch(ex){console.log('### EXCEPTION - Creep.prototype.hasBoostTarget(): '+ex.message)}};Creep.prototype.isFull=function(a='none'){try{if(a==='none'){if(!this.getMemory().full){this.getMemory().full=!1}return this.getMemory().full}else{this.getMemory().full=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.isFull(): '+ex.message)}};Creep.prototype.moveToPos=function(a){try{if(this.fatigue===0){this.moveTo(a,{reusePath:20})}}catch(ex){console.log('### EXCEPTION - Creep.prototype.moveToPos(): '+ex.message)}};Creep.prototype.hasBodyPart=function(a){try{if(!this.getMemory().has_body_part){this.getMemory().has_body_part={}}if(!this.getMemory().has_body_part[a]){this.getMemory().has_body_part[a]=_.sum(this.body,x=>x.type===a)>0}return this.getMemory().has_body_part[a]}catch(ex){console.log('### EXCEPTION - Creep.prototype.hasBodyPart: | '+a+'| '+ex.message)}};Creep.prototype.manageCarryState=function(a,b){try{if(this.isFull()&&_.sum(this.carry)===0){this.isFull(!1);if(a){this.deallocate('give')}}else if(!this.isFull()&&_.sum(this.carry)===this.carryCapacity){this.isFull(!0);if(b){this.deallocate('get')}}}catch(ex){console.log('### EXCEPTION - Creep.prototype.manageCarryState: '+ex.message)}};Creep.prototype.targetedForJob=function(a=!1){try{if(!a){if(!this.getMemory().target_job){this.memory.target_job='none'}return this.getMemory().target_job}else{this.getMemory().target_job=a}}catch(ex){console.log('### EXCEPTION - Creep.prototype.targetedForJob: '+ex.message)}};Creep.prototype.cargoType=function(){try{if(!this.cargo_type){let a=Object.keys(this.carry),b=a.length;if(b===1){if(this.carry.energy===0){this.cargo_type='empty'}else{this.cargo_type='energy'}}else{let c=_.max(this.carry);do{if(this.carry[a[b-1]]===c){this.cargo_type=a[b-1];break}b--}while(b>0)}}return this.cargo_type}catch(ex){console.log('### EXCEPTION - Creep.prototype.cargoType: '+ex.message)}};Creep.prototype.inArea=function(a,b,c,d,f){try{return this.room.name===a&&this.pos.x>=b&&this.pos.x<=d&&this.pos.y>=c&&this.pos.y<=f}catch(ex){console.log('### EXCEPTION - Creep.prototype.inArea: '+ex.message)}};Creep.prototype.followWaypointPath=function(a,b=1){try{let c=!1;if(!this.memory.waypoint||this.memory.waypoint.prefix!==a){this.memory.waypoint={prefix:a,number:1};this.deallocate('all')}if(this.memory.waypoint.number!=='end'){let d=Game.flags[this.memory.waypoint.prefix+'_'+this.memory.waypoint.number];if(!!d){this.say('transit ');if(this.pos.getRangeTo(d)>b){this.moveToPos(d.pos)}else{this.memory.waypoint.number++}if(this.hasBodyPart(HEAL)){if(this.hits<this.hitsMax){this.heal(this)}}c=!0}else{this.memory.waypoint.number='end'}}return c}catch(ex){console.log('### EXCEPTION - Creep.prototype.followWaypointPath: '+ex.message)}};Creep.prototype.isIsolated=function(){try{return this.pos.findInRange(FIND_HOSTILE_CREEPS,1).length===1}catch(ex){console.log('### EXCEPTION - Creep.prototype.isIsolated: '+ex.message)}};Creep.prototype.resourceToWithdraw=function(a='none'){try{if(a==='none'){if(!this.getMemory().resource_to_withdraw){this.getMemory().resource_to_withdraw=RESOURCE_ENERGY}return this.getMemory().resource_to_withdraw}else{this.getMemory().resource_to_withdraw=a;return this.getMemory().resource_to_withdraw}}catch(ex){console.log('### EXCEPTION - Creep.prototype.resourceToWithdraw: '+ex.message)}};Creep.prototype.isBadlyWounded=function(){try{if(!this.is_badly_wounded){this.is_badly_wounded=this.hits<this.hitsMax*0.2}return this.is_badly_wounded}catch(ex){console.log('### EXCEPTION - Creep.prototype.resourceToWithdraw: '+ex.message)}};Mineral.prototype.hasExtractor=function(){try{if(!this.getMemory().has_extractor||Game.time>this.getMemory().has_extractor.lastUpdate+1000){this.getMemory().has_extractor={value:_.sum(Game.structures,x=>x.objectType()==='StructureExtractor'&&x.room.name===this.room.name)===1,lastUpdate:Game.time}}return this.getMemory().has_extractor.value}catch(ex){console.log('### EXCEPTION - Mineral.prototype.hasExtractor(): '+ex.message)}};Room.prototype.getSettings=function(){try{if(!this.settings){if(!Memory.settings.room[this.name]){this.settings=Memory.settings.room.default}else{this.settings=Memory.settings.room[this.name]}}return this.settings}catch(ex){console.log('### EXCEPTION - Room.prototype.getSettings(): '+ex.message)}};Room.prototype.getGatheringSettings=function(){try{return Memory.settings.gathering[this.name]}catch(ex){console.log('### EXCEPTION - Room.prototype.getGatheringSettings(): '+ex.message)}};Room.prototype.isMyRoom=function(){try{const a=100;if(!this.getMemory().is_my_room||Game.time>this.getMemory().is_my_room.lastUpdate+a){let b=!1;if(!!this.controller){if(this.controller.level>0){if(Memory.settings.general.usernames.indexOf(this.controller.owner.username)>-1){b=!0}}else{if(!!this.controller.reservation&&Memory.settings.general.usernames.indexOf(this.controller.reservation.username)>-1||!!this.controller.sign&&Memory.settings.general.usernames.indexOf(this.controller.sign.username)>-1){b=!0}}}else{if(!!Memory.settings.gathering[this.name]||Memory.settings.gathering[this.name].isActiveOp){b=!0}}this.getMemory().is_my_room={lastUpdate:Game.time,value:b}}return this.getMemory().is_my_room.value}catch(ex){console.log('### EXCEPTION - Room.prototype.isMyRoom: '+ex.message)}};Room.prototype.isMine=function(){try{return this.isMyRoom()}catch(ex){console.log('### EXCEPTION - Room.prototype.isMine: '+ex.message)}};Room.prototype.getExistingCreepsByClassAndRole=function(a,b,c){try{if(!this.existing_creeps_by_class_and_role){this.existing_creeps_by_class_and_role={}}if(!this.existing_creeps_by_class_and_role[a]){this.existing_creeps_by_class_and_role[a]={}}if(!this.existing_creeps_by_class_and_role[a][b]){this.existing_creeps_by_class_and_role[a][b]={}}if(!this.existing_creeps_by_class_and_role[a][b][c]){this.existing_creeps_by_class_and_role[a][b][c]=_.select(Game.creeps,x=>x.homeRoom()===a&&x.workClass()===b&&x.role()===c&&(x.role()==='reserver'||x.spawning||x.creepRespawnTimeBuffer()<x.ticksToLive))}return this.existing_creeps_by_class_and_role[a][b][c]}catch(ex){console.log('### EXCEPTION - Room.prototype.getExistingCreepsByClassAndRole(): '+ex.message)}};Room.prototype.getExistingCreepsWounded=function(){try{if(!this.existing_creeps_wounded){this.existing_creeps_wounded=_.select(Game.creeps,x=>x.room.name===this.name&&x.hits<x.hitsMax)}return this.existing_creeps_wounded}catch(ex){console.log('### EXCEPTION - Room.prototype.getExistingCreepsWounded(): '+ex.message)}};Room.prototype.getNumCreepsRequiredByClassAndRole=function(a,b,c){try{if(b==='worker'){if(!this.getSettings().creepSpawnGoals[c]){return 0}else{return this.getSettings().creepSpawnGoals[c].num}}else if(b==='assistant'){if(!Memory.settings.assistance[a].creepSpawnGoals[c]){return 0}else{return Memory.settings.assistance[a].creepSpawnGoals[c].num}}else if(b==='gatherer'){if(!Memory.settings.gathering[a].creepSpawnGoals[c]){return 0}else{return Memory.settings.gathering[a].creepSpawnGoals[c].num}}else if(b==='powerHarvester'){if(!Memory.settings.powerharvest[a].creepSpawnGoals[c]){return 0}else{return Memory.settings.powerharvest[a].creepSpawnGoals[c].num}}else if(b==='claimer'){}else if(b==='military'){if(!Memory.settings.military[a].creepSpawnGoals[c]){return 0}else{return Memory.settings.military[a].creepSpawnGoals[c].num}}}catch(ex){console.log('### EXCEPTION - Room.prototype.getNumCreepsRequiredByClassAndRole(): '+ex.message)}};Room.prototype.getNumCreepsQueuedByClassAndRole=function(a,b,c){try{if(!this.num_creeps_queued_by_class_and_role){this.num_creeps_queued_by_class_and_role={}}if(!this.num_creeps_queued_by_class_and_role[a]){this.num_creeps_queued_by_class_and_role[a]={}}if(!this.num_creeps_queued_by_class_and_role[a][b]){this.num_creeps_queued_by_class_and_role[a][b]={}}if(!this.num_creeps_queued_by_class_and_role[a][b][c]){this.num_creeps_queued_by_class_and_role[a][b][c]=0}const d=this.getMySpawns();let f,g;for(f in d){if(d.hasOwnProperty(f)){g=d[f].queueSummary();if(!!g[a]&&!!g[a][b]&&!!g[a][b][c]){this.num_creeps_queued_by_class_and_role[a][b][c]+=g[a][b][c]}}}return this.num_creeps_queued_by_class_and_role[a][b][c]}catch(ex){console.log('### EXCEPTION - Room.prototype.getNumCreepsQueuedByClassAndRole(): '+ex.message)}};Room.prototype.isShortOfCarriers=function(){try{if(!this.is_short_of_carriers){let a=0;if(!!this.getSettings().creepSpawnGoals.restocker){a+=this.getSettings().creepSpawnGoals.restocker.num}if(!!this.getSettings().creepSpawnGoals.collector){a+=this.getSettings().creepSpawnGoals.collector.num}let b=0;if(!!Memory.settings.assistance[this.name]&&Memory.settings.assistance[this.name].isActiveOp){if(!!Memory.settings.assistance[this.name]){if(!!Memory.settings.assistance[this.name].creepSpawnGoals.restocker){b=Memory.settings.assistance[this.name].creepSpawnGoals.restocker.num}if(!!Memory.settings.assistance[this.name].creepSpawnGoals.collector){b+=Memory.settings.assistance[this.name].creepSpawnGoals.collector.num}}}const c=a+b;let d=0;d+=this.getExistingCreepsByClassAndRole(this.name,'worker','restocker').length;d+=this.getExistingCreepsByClassAndRole(this.name,'worker','collector').length;d+=this.getExistingCreepsByClassAndRole(this.name,'assistant','restocker').length;d+=this.getExistingCreepsByClassAndRole(this.name,'assistant','collector').length;this.is_short_of_carriers={value:c>d}}return this.is_short_of_carriers.value}catch(ex){console.log('### EXCEPTION - Room.prototype.isShortOfCarriers(): '+ex.message)}};Room.prototype.isShortOfManagers=function(){try{if(!this.is_short_of_managers){let a=0;if(!!this.getSettings().creepSpawnGoals.manager){a=this.getSettings().creepSpawnGoals.manager.num}let b=0;if(!!Memory.settings.assistance[this.name]&&Memory.settings.assistance[this.name].isActiveOp){if(!!Memory.settings.assistance[this.name]&&!!Memory.settings.assistance[this.name].creepSpawnGoals.manager){b=Memory.settings.assistance[this.name].creepSpawnGoals.manager.num}}const c=a+b;let d=0;d+=this.getExistingCreepsByClassAndRole(this.name,'worker','manager').length;d+=this.getExistingCreepsByClassAndRole(this.name,'assistant','manager').length;this.is_short_of_managers={value:c>d}}return this.is_short_of_managers.value}catch(ex){console.log('### EXCEPTION - Room.prototype.isShortOfManagers(): '+ex.message)}};Room.prototype.queueSpawnOrderOnBestSpawn=function(a){try{if(this.getMySpawns().length===1){this.getMySpawns()[0].queue(a)}else if(this.getMySpawns().length>1){let b=_.min(this.getMySpawns(),x=>x.queue().length);b.queue(a)}}catch(ex){console.log('### EXCEPTION - Room.prototype.queueSpawnRequestOnBestSpawn(): '+ex.message)}};Room.prototype.resetSpawnQueues=function(){try{let i,a=this.getMySpawns();for(i in a){if(a.hasOwnProperty(i)){a[i].resetQueue()}}}catch(ex){console.log('### EXCEPTION - Room.prototype.resetSpawnQueues(): '+ex.message)}};Room.prototype.underAttack=function(){try{if(!this.under_attack){this.under_attack=this.hostileCreepsDangerous().length>0}return this.under_attack}catch(ex){console.log('### EXCEPTION - Room.prototype.underAttack(): '+ex.message)}};Room.prototype.creepsAll=function(){try{if(!this.creeps_all){this.creeps_all=this.find(FIND_CREEPS)}return this.creeps_all}catch(ex){console.log('### EXCEPTION - Room.prototype.hostileCreeps(): '+ex.message)}};Room.prototype.hostileCreepsAll=function(){try{if(!this.hostile_creeps_all){this.hostile_creeps_all=_.select(this.creepsAll(),x=>x.isHostile()&&x.owner.username!=='Source Keeper')}return this.hostile_creeps_all}catch(ex){console.log('### EXCEPTION - Room.prototype.hostileCreeps(): '+ex.message)}};Room.prototype.hostileCreepsDangerous=function(){try{if(!this.hostile_creeps_dangerous){this.hostile_creeps_dangerous=_.select(this.hostileCreepsAll(),x=>x.hasBodyPart(WORK)||x.hasBodyPart(ATTACK)||x.hasBodyPart(RANGED_ATTACK))}return this.hostile_creeps_dangerous}catch(ex){console.log('### EXCEPTION - Room.prototype.hostileCreepsDangerous(): '+ex.message)}};Room.prototype.hostileCreepsSourceKeepers=function(a=!1){try{if(!this.hostile_creeps_source_keepers){if(a){this.hostile_creeps_source_keepers=_.select(this.creepsAll(),x=>x.owner.username==='Source Keeper')}else{let b=this.getMinerals()[0];this.hostile_creeps_source_keepers=_.select(this.creepsAll(),x=>x.owner.username==='Source Keeper'&&x.pos.getRangeTo(b)>6)}}return this.hostile_creeps_source_keepers}catch(ex){console.log('### EXCEPTION - Room.prototype.hostileCreepsSourceKeepers(): '+ex.message)}};Room.prototype.getMySpawns=function(){try{if(!this.my_spawns){this.my_spawns=this.find(FIND_MY_SPAWNS)}return this.my_spawns}catch(ex){console.log('### EXCEPTION - Room.prototype.getMySpawns(): '+ex.message)}};Room.prototype.getSources=function(){try{if(!this.sources){this.sources=this.find(FIND_SOURCES)}return this.sources}catch(ex){console.log('### EXCEPTION - Room.prototype.getSources(): '+ex.message)}};Room.prototype.getSourcesNeedingMining=function(){try{if(!this.sources_needing_mining){this.sources_needing_mining=_.select(this.getSources(),x=>x.needsMining())}return this.sources_needing_mining}catch(ex){console.log('### EXCEPTION - Room.prototype.getSources(): '+ex.message)}};Room.prototype.getConstructionSites=function(){try{if(!this.construction_sites){this.construction_sites=this.find(FIND_CONSTRUCTION_SITES)}return this.construction_sites}catch(ex){console.log('### EXCEPTION - Room.prototype.getConstructionSites(): '+ex.message)}};Room.prototype.getDroppedEnergy=function(){try{if(!this.dropped_energy){this.dropped_energy=this.find(FIND_DROPPED_RESOURCES,{filter:x=>x.resourceType==='energy'})}return this.dropped_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getDroppedEnergy(): '+ex.message)}};Room.prototype.getWithdrawlTargets=function(){try{if(!this.withdrawl_targets){this.withdrawl_targets=this.getContainersWithEnergy()}return this.withdrawl_targets}catch(ex){console.log('### EXCEPTION - Room.prototype.getDroppedEnergy(): '+ex.message)}};Room.prototype.getEnemyInfrastructureTargetsStore=function(){try{if(!this.enemy_infrastructure_targets_store){this.enemy_infrastructure_targets_store=this.find(FIND_HOSTILE_STRUCTURES,{filter:x=>!!x.store&&_.sum(x.store)>0})}return this.enemy_infrastructure_targets_store}catch(ex){console.log('### EXCEPTION - Room.prototype.getEnemyInfrastructureTargetsStore(): '+ex.message)}};Room.prototype.getEnemyInfrastructureTargetsNonStore=function(){try{if(!this.enemy_infrastructure_targets_non_store){this.enemy_infrastructure_targets_non_store=this.find(FIND_HOSTILE_STRUCTURES,{filter:x=>(!x.store||_.sum(x.store)===0)&&x.objectType()!=='StructureKeeperLair'})}return this.enemy_infrastructure_targets_non_store}catch(ex){console.log('### EXCEPTION -Room.prototype.getEnemyInfrastructureTargetsNonStore(): '+ex.message)}};Room.prototype.getExtensionsNeedingEnergy=function(){try{if(!this.extensions_needing_energy){this.extensions_needing_energy=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructureExtension'&&x.needsEnergy())}return this.extensions_needing_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getExtensionsNeedingEnergy(): '+ex.message)}};Room.prototype.getSpawnsNeedingEnergy=function(){try{if(!this.spawns_needing_energy){this.spawns_needing_energy=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructureSpawn'&&x.needsEnergy())}return this.spawns_needing_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getSpawnsNeedingEnergy(): '+ex.message)}};Room.prototype.getTowersNeedingEnergy=function(){try{if(!this.towers_needing_energy){this.towers_needing_energy=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructureTower'&&x.needsEnergy())}return this.towers_needing_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getTowersNeedingEnergy(): '+ex.message)}};Room.prototype.getLabsNeedingEnergy=function(){try{if(!this.labs_needing_energy){this.labs_needing_energy=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructureLab'&&x.needsEnergy())}return this.labs_needing_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getLabsNeedingEnergy(): '+ex.message)}};Room.prototype.totalStoredResource=function(a){try{if(!this.total_stored_resource){this.total_stored_resource={}}if(!this.total_stored_resource[a]){let b=this.storage&&this.storage.store[a]||0,c=this.terminal&&this.terminal.store[a]||0;this.total_stored_resource[a]=c+b}return this.total_stored_resource[a]}catch(ex){console.log('### EXCEPTION - Room.prototype.totalStoredResource(): '+ex.message)}};Room.prototype.isEnergyCritical=function(){try{if(!this.is_energy_critical){this.is_energy_critical={value:this.totalStoredResource('energy')<this.getSettings().critical_energy_threshold}}return this.is_energy_critical.value}catch(ex){console.log('### EXCEPTION - Room.prototype.isEnergyCritical(): '+ex.message)}};Room.prototype.hasEnergySurplus=function(){try{if(!this.has_energy_surplus){this.has_energy_surplus={value:this.totalStoredResource('energy')>this.getSettings().high_energy_threshold}}return this.has_energy_surplus.value}catch(ex){console.log('### EXCEPTION - Room.prototype.isEnergyCritical(): '+ex.message)}};Room.prototype.storageWithMostEnergy=function(){try{if(!this.storage_with_most_energy){let a=!!this.storage,b=!!this.terminal;if(a&&b&&(this.storage.store.energy>0||this.terminal.store.energy>0)){if(this.storage.store.energy>this.terminal.store.energy){this.storage_with_most_energy=this.storage}else{this.storage_with_most_energy=this.terminal}}else if(a&&this.storage.store.energy>0){this.storage_with_most_energy=this.storage}else if(b&&this.terminal.store.energy>0){this.storage_with_most_energy=this.terminal}else{this.storage_with_most_energy=void 0}}return this.storage_with_most_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.storageWithMostEnergy(): '+ex.message)}};Room.prototype.getRoadsNeedingRepair=function(){try{if(!this.roads_needing_repair){this.roads_needing_repair=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureRoad'&&x.needsRepair()})}return this.roads_needing_repair}catch(ex){console.log('### EXCEPTION - Room.prototype.getRoadsNeedingRepair(): '+ex.message)}};Room.prototype.getContainersNeedingRepair=function(){try{if(!this.containers_needing_repair){this.containers_needing_repair=_.select(this.getContainers(),x=>x.needsRepair())}return this.containers_needing_repair}catch(ex){console.log('### EXCEPTION - Room.prototype.getContainersNeedingRepair(): '+ex.message)}};Room.prototype.getNuker=function(){try{if(!this.nuker){this.nuker=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructureNuker')[0];if(!!this.nuker){this.nuker.mineralType='G';this.nuker.mineralAmount=this.nuker.ghodium}}return this.nuker}catch(ex){console.log('### EXCEPTION - Room.prototype.getNuker(): '+ex.message)}};Room.prototype.nukerNeedsEnergy=function(){try{if(!this.nuker_needs_energy){if(!!this.getNuker()&&this.getNuker().energy<this.getNuker().energyCapacity&&this.hasEnergySurplus()){this.nuker_needs_energy={value:!0}}else{this.nuker_needs_energy={value:!1}}}return this.nuker_needs_energy.value}catch(ex){console.log('### EXCEPTION - Room.prototype.nukerNeedsEnergy(): '+ex.message)}};Room.prototype.nukerNeedsGhodium=function(){try{if(!this.nuker_needs_ghodium){if(!!this.getNuker()&&this.getNuker().ghodium<this.getNuker().ghodiumCapacity){this.nuker_needs_ghodium={value:!0}}else{this.nuker_needs_ghodium={value:!1}}}return this.nuker_needs_ghodium.value}catch(ex){console.log('### EXCEPTION - Room.prototype.nukerNeedsGhodium(): '+ex.message)}};Room.prototype.getPowerSpawn=function(){try{if(!this.power_spawn){let a=500;if(!this.getMemory().power_spawn||Game.time>this.getMemory().power_spawn.lastUpdate+a){this.power_spawn=_.select(Game.structures,x=>this.name===x.room.name&&x.objectType()==='StructurePowerSpawn')[0];if(!this.power_spawn){this.getMemory().power_spawn={lastUpdate:Game.time,id:void 0}}else{this.getMemory().power_spawn={lastUpdate:Game.time,id:this.power_spawn.id}}}else{this.power_spawn=Game.getObjectById(this.getMemory().power_spawn.id)}}return this.power_spawn}catch(ex){console.log('### EXCEPTION - Room.prototype.getPowerSpawn(): '+ex.message)}};Room.prototype.powerSpawnNeedsEnergy=function(){try{if(!this.power_spawn_needs_energy){if(!!this.getPowerSpawn()&&this.getPowerSpawn().energy<this.getPowerSpawn().energyCapacity&&this.hasEnergySurplus()){this.power_spawn_needs_energy={value:!0}}else{this.power_spawn_needs_energy={value:!1}}}return this.power_spawn_needs_energy.value}catch(ex){console.log('### EXCEPTION - Room.prototype.powerSpawnNeedsEnergy(): '+ex.message)}};Room.prototype.getDefenceRepairSites=function(){try{let a;if(this.hasEnergySurplus()&&!!this.controller){switch(this.controller.level){case 1:a=0;break;case 2:a=30000;break;case 3:a=100000;break;case 4:a=300000;break;case 5:a=1000000;break;case 6:a=3000000;break;case 7:a=10000000;break;case 8:a=18000000;break;default:a=this.getSettings().defence_repair_threshold;}}else{a=this.getSettings().defence_repair_threshold}if(!this.defence_repair_sites){this.defence_repair_sites=this.find(FIND_STRUCTURES,{filter:x=>(x.structureType===STRUCTURE_WALL||x.structureType===STRUCTURE_RAMPART)&&x.hits<a})}return this.defence_repair_sites}catch(ex){console.log('### EXCEPTION - Room.prototype.getDefenceRepairSites(): '+ex.message)}};Room.prototype.getMinerals=function(){try{if(!this.minerals){this.minerals=this.find(FIND_MINERALS)}return this.minerals}catch(ex){console.log('### EXCEPTION - Room.prototype.getMinerals(): '+ex.message)}};Room.prototype.getContainers=function(){try{if(!this.containers){this.containers=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureContainer'})}return this.containers}catch(ex){console.log('### EXCEPTION - Room.prototype.getContainers(): '+ex.message)}};Room.prototype.getContainersWithEnergy=function(){try{if(!this.containers_with_energy){this.containers_with_energy=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureContainer'&&x.hasResource(RESOURCE_ENERGY)})}return this.containers_with_energy}catch(ex){console.log('### EXCEPTION - Room.prototype.getContainersWithEnergy(): '+ex.message)}};Room.prototype.getLinks=function(){try{if(!this.links){this.links=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureLink'})}return this.links}catch(ex){console.log('### EXCEPTION - Room.prototype.getLinks(): '+ex.message)}};Room.prototype.getLabs=function(){try{if(!this.labs){this.labs=this.find(FIND_MY_STRUCTURES,{filter:x=>x.objectType()==='StructureLab'})}return this.labs}catch(ex){console.log('### EXCEPTION - Room.prototype.getLabs(): '+ex.message)}};Room.prototype.getBoosterLabByMineral=function(a){try{if(!this.booster_lab_by_mineral){this.booster_lab_by_mineral={}}if(!this.booster_lab_by_mineral[a]){this.booster_lab_by_mineral[a]=_.select(this.getLabs(),x=>x.labMineralType()===a&&x.role()==='booster')[0]}return this.booster_lab_by_mineral[a]}catch(ex){console.log('### EXCEPTION - Room.prototype.getBoosterLabByMineral(): '+ex.message)}};Room.prototype.getLabsNeedingTopUp=function(){try{if(!this.labs_needing_topup){this.labs_needing_topup=_.select(this.getLabs(),x=>(x.role()==='input'||x.role()==='booster')&&x.labMineralType()!=='none'&&(!x.mineralType||x.mineralType===x.labMineralType())&&x.mineralAmount<2000);if(this.nukerNeedsGhodium()){let a=this.getNuker();this.labs_needing_topup.push(a)}}return this.labs_needing_topup}catch(ex){console.log('### EXCEPTION - Room.prototype.getLabsNeedingTopUp(): '+ex.message)}};Room.prototype.getLabsNeedingEmptying=function(){try{if(!this.labs_needing_emptying){this.labs_needing_emptying=_.select(this.getLabs(),x=>!!x.mineralType&&x.mineralType!==x.labMineralType()||x.role()==='output'&&x.mineralAmount>1000)}return this.labs_needing_emptying}catch(ex){console.log('### EXCEPTION - Room.prototype.getLabNeedingEmptying(): '+ex.message)}};Room.prototype.buildLevel=function(){try{if(!this.build_level){let a=1;if(this.energyCapacityAvailable>=12000){a=8}else if(this.energyCapacityAvailable>=5000){a=7}else if(this.energyCapacityAvailable>=2300){a=6}else if(this.energyCapacityAvailable>=1800){a=5}else if(this.energyCapacityAvailable>=1300){a=4}else if(this.energyCapacityAvailable>=800){a=3}else if(this.energyCapacityAvailable>=550){a=2}this.build_level=a}return this.build_level}catch(ex){console.log('### EXCEPTION - Room.prototype.buildLevel(): '+ex.message)}};Room.prototype.usesMineral=function(a){try{if(!this.getMemory().uses_mineral){this.getMemory().uses_mineral={}}if(!this.getMemory().uses_mineral[a]||!!update_datetime&&update_datetime>this.getMemory().uses_mineral[a].lastUpdate){let b;if(a==='energy'){b=!0}else{if(a==='G'&&this.nukerNeedsGhodium()){b=!0}else{b=_.sum(this.getLabs(),x=>x.labMineralType()===a&&(x.role()==='input'||x.role()==='booster'))>0}}this.getMemory().uses_mineral[a]={lastUpdate:update_datetime,value:b}}return this.getMemory().uses_mineral[a].value}catch(ex){console.log('### EXCEPTION - Room.prototype.usesMineral(): '+ex.message)}};Room.prototype.getKeepersLairs=function(a=!1){try{if(a){if(!this.keepers_lairs_with){this.keepers_lairs_with=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureKeeperLair'})}return this.keepers_lairs_with}else{if(!this.keepers_lairs_without){let b=this.getMinerals()[0];this.keepers_lairs_without=this.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructureKeeperLair'&&x.pos.getRangeTo(b)>6})}return this.keepers_lairs_without}}catch(ex){console.log('### EXCEPTION - Room.prototype.keepers_lairs(): '+ex.message)}};Room.prototype.targetsInArea=function(a){try{return _.select(this.hostileCreepsAll(),x=>x.inArea(this.name,a.topleft.x,a.topleft.y,a.bottomRight.x,a.bottomRight.y))}catch(ex){console.log('### EXCEPTION - StructureRoom.prototype.targetsInArea(): '+ex.message)}};Room.prototype.getDefensiveCentre=function(){try{if(!this.defensive_centre){this.defensive_centre=new RoomPosition(this.getSettings().defensive_centre.x,this.getSettings().defensive_centre.y,this.name)}return this.defensive_centre}catch(ex){console.log('### EXCEPTION - StructureRoom.prototype.getDefensiveCentre(): '+ex.message)}};Room.prototype.towerTargettingAlgorithm=function(a){try{if(a.length>0){let b;const c=_.select(a,x=>x.isIsolated());if(c.length>0){b=this.getDefensiveCentre().findClosestByRange(c);if(!!this.previousAttackTarget()&&this.previousAttackTarget().id===b.id&&!this.previousAttackTargetIsBeingDamaged()){b=void 0}}if(!b){const d=_.select(a,x=>x.isBadlyWounded());if(!!d[0]){b=d[0]}else{const f=_.select(a,x=>x.hasBodyPart(HEAL));let g=Math.floor(Math.random()*2),h,j,k;if(f.length>0&&g===0){j=this.getDefensiveCentre().findClosestByRange(f);h=this.getDefensiveCentre().getRangeTo(j);k=this.getDefensiveCentre().findInRange(f,h+3);g=Math.floor(Math.random()*k.length);b=k[g]}else{j=this.getDefensiveCentre().findClosestByRange(a);h=this.getDefensiveCentre().getRangeTo(j);k=this.getDefensiveCentre().findInRange(a,h+3);g=Math.floor(Math.random()*k.length);b=k[g]}}}this.previousAttackTarget(b);return b}else{return void 0}}catch(ex){console.log('### EXCEPTION - StructureTower.prototype.towerTargettingAlgorithm(): '+ex.message)}};Room.prototype.getTowerTarget=function(){try{if(!this.tower_target){let a=void 0;if(!!this.previousAttackTarget()&&this.previousAttackTargetIsBeingDamaged()){a=this.previousAttackTarget();this.tower_target={target:a}}else{let b=!1,c;for(let i=0;i<this.getSettings().fire_zones.length&&!b;i++){c=this.targetsInArea(this.getSettings().fire_zones[i]);if(c.length>0){a=this.towerTargettingAlgorithm(c);b=!0}}this.tower_target={target:a}}}return this.tower_target.target}catch(ex){console.log('### EXCEPTION - StructureRoom.prototype.getTowerTarget(): '+ex.message)}};Room.prototype.previousAttackTarget=function(a=!1){try{const b=this.getMemory().previous_attack_target_id;if(!a){if(!this.previous_attack_target){if(!!b){this.previous_attack_target=Game.getObjectById(b);if(!this.previous_attack_target||this.previous_attack_target.room.name!==this.name){this.getMemory().previous_attack_target_id=void 0}}}return this.previous_attack_target}else if(a.id===b){this.getMemory().previous_attack_target_hit_point_history.push(a.hits)}else{this.getMemory().previous_attack_target_id=a.id;this.getMemory().previous_attack_target_hit_point_history=[];this.getMemory().previous_attack_target_hit_point_history.push(a.hits)}}catch(ex){console.log('### EXCEPTION - Room.prototype.previousAttackTarget() : '+ex.message)}};Room.prototype.previousAttackTargetIsBeingDamaged=function(){try{if(!this.getMemory().previous_attack_target_hit_point_history){return!0}else{const a=this.getMemory().previous_attack_target_hit_point_history.length;return!!this.previousAttackTarget()&&this.previousAttackTarget().hits<this.getMemory().previous_attack_target_hit_point_history[a-1]}}catch(ex){console.log('### EXCEPTION - Room.prototype.previousAttackTargetIsBeingDamaged(): '+ex.message)}};Room.prototype.evacuateResources=function(){try{if(this.terminal.cooldown===0){const a=Memory.settings.general.terminalsToExclude,b=_.select(Game.structures,x=>x.objectType()==='StructureTerminal'&&x.isMine()&&!!x.room.controller&&x.room.controller.level>=6&&a.indexOf(x.id)==-1),c=_.min(b,x=>_.sum(x.store));let d=300000-_.sum(c.store),f,g;for(g in this.terminal.store){if(this.terminal.store[g]>=100){if(g!=='energy'){if(this.terminal.store[g]<d){d=this.terminal.store[g]}f=this.terminal.send(g,d,c.room.name);break}else if(g==='energy'&&_.size(this.terminal.store)===1){if(this.terminal.store[g]<d){d=this.terminal.store[g]}d=d*0.8;f=this.terminal.send(g,d,c.room.name);break}console.log('EVACUATING '+g+' '+d+' FROM '+this.name+' TO '+c.room.name+' result: '+f)}}}}catch(ex){console.log('### EXCEPTION - Room.prototype.evacuateResources(): '+ex.message)}};Room.prototype.incomingNukes=function(){try{if(!this.nukesIncoming){const a=this.find(FIND_NUKES);if(a.length>0){this.nukesIncoming={value:!0,nukes:a}}else{this.nukesIncoming={value:!0,nukes:a}}}return this.nukesIncoming}catch(ex){console.log('### EXCEPTION - Room.prototype.incomeingNukes(): '+ex.message)}};Room.prototype.hasIncomingNukes=function(){try{return this.incomingNukes().value}catch(ex){console.log('### EXCEPTION - Room.prototype.hasIncomeingNukes(): '+ex.message)}};Room.prototype.incomingNukesWithinTicks=function(a){try{if(this.hasIncomingNukes()&&!!this.nukes_within_period[a]){this.nukes_within_period[a]={nukes:_.select(this.incomingNukes(),x=>x.timeToLand<a)}}return this.nukes_within_period[a]}catch(ex){console.log('### EXCEPTION - Room.prototype.incomingNukesWithinTicks: '+ex.message)}};RoomObject.prototype.isMine=function(){try{const a=100,b=this.getMemory();if(!b.is_mine||Game.time>b.is_mine.lastUpdate+a){let c=!1;if(!!this.owner||this instanceof OwnedStructure){if(!!this.owner&&Memory.settings.general.usernames.indexOf(this.owner.username)>-1){c=!0}}else{if(this.room.isMyRoom()&&this.objectType()!=='StructurePortal'){c=!0}}b.is_mine={lastUpdate:Game.time,value:c}}return b.is_mine.value}catch(ex){console.log('### EXCEPTION - RoomObject.prototype.isMine(): '+ex.message)}};RoomObject.prototype.isHostile=function(){try{const a=500,b=this.getMemory();if(!b.is_hostile||Game.time>b.is_hostile.lastUpdate+a||!0){let c=!0;if(this.isMine()){c=!1}else{const d=Memory.settings.general.allies,f=Memory.settings.general.peace;if(!!this.owner){if(!!this.owner&&(d.indexOf(this.owner.username)>-1||f.indexOf(this.owner.username)>-1)){c=!1}}else{if(!!this.room.controller){if(this.room.controller.level>0){if(d.indexOf(this.room.controller.owner.username)>-1||f.indexOf(this.room.controller.owner.username)>-1){c=!1}}else{if(!!this.room.controller.reservation&&(d.indexOf(this.room.controller.reservation.username)>-1||f.indexOf(this.room.controller.reservation.username)>-1)){c=!1}else if(!!this.room.controller.sign&&(d.indexOf(this.room.controller.sign.username)>-1||f.indexOf(this.room.controller.sign.username)>-1)){c=!1}}}}}b.is_hostile={lastUpdate:Game.time,value:c}}return b.is_hostile.value}catch(ex){console.log('### EXCEPTION - Structure.prototype.isHostile(): '+ex.message)}};Source.prototype.assignedMiners=function(){try{return _.select(Game.creeps,x=>x.targetedForJob()==='mineEnergy'&&x.targetGetId()===this.id&&x.ticksToLive>x.respawnTimeBuffer())}catch(ex){console.log('### EXCEPTION - Source.prototype.assignedMiners(): '+ex.message)}};Source.prototype.needsMining=function(){try{if(!this.needs_mining){this.needs_mining={value:this.energy>0&&this.binsNeedingEnergy().length>0&&this.assignedMiners.length<this.numAccessibleSpaces()}}return this.needs_mining.value}catch(ex){console.log('### EXCEPTION - Source.prototype.needsMining(): '+ex.message)}};Source.prototype.bins=function(){try{if(!this.source_bins){this.source_bins=this.room.find(FIND_STRUCTURES,{filter:x=>(x.objectType()==='StructureContainer'||x.objectType()==='StructureLink')&&x.isMine()&&x.pos.getRangeTo(this)<4})}return this.source_bins}catch(ex){console.log('### EXCEPTION - Source.prototype.bins(): '+ex.message)}};Source.prototype.binsNeedingEnergy=function(){try{if(!this.source_bins_needing_energy){this.source_bins_needing_energy=_.select(this.bins(),x=>x.needsEnergy())}return this.source_bins_needing_energy}catch(ex){console.log('### EXCEPTION - Source.prototype.bins(): '+ex.message)}};Source.prototype.numAccessibleSpaces=function(){try{if(!this.getMemory().num_accessible_spaces){let a=0,b=Game.map.getTerrainAt(this.pos.x+1,this.pos.y,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x+1,this.pos.y+1,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x,this.pos.y+1,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x-1,this.pos.y+1,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x+1,this.pos.y,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x-1,this.pos.y-1,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x,this.pos.y-1,this.room.name);if(b!=='wall'){a++}b=Game.map.getTerrainAt(this.pos.x+1,this.pos.y-1,this.room.name);if(b!=='wall'){a++}this.getMemory().num_accessible_spaces=a}return this.getMemory().num_accessible_spaces}catch(ex){console.log('### EXCEPTION - Source.prototype.bins(): '+ex.message)}};Structure.prototype.needsRepair=function(){try{if(!this.needs_repair){this.needs_repair={value:this.hits<this.hitsMax}}return this.needs_repair.value}catch(ex){console.log('### EXCEPTION - Structure.prototype.needsRepair(): '+ex.message)}};Structure.prototype.needsEnergy=function(){try{if(!this.needs_energy){if(!!this.store){this.needs_energy={value:_.sum(this.store)<this.storeCapacity}}else{try{this.needs_energy={value:this.energy<this.energyCapacity}}catch(ex){this.needs_energy={value:!1}}}}return this.needs_energy.value}catch(ex){console.log('### EXCEPTION - Structure.prototype.needsEnergy(): '+ex.message)}};StructureContainer.prototype.hasResource=function(a){try{if(!this.has_resource){this.has_resource={}}if(!this.has_resource[a]){this.has_resource[a]=this.store[a]>0}return this.has_resource[a]}catch(ex){console.log('### EXCEPTION - StructureContainer.prototype.hasResource(): '+ex.message)}};StructureContainer.prototype.role=function(){try{let a=50;if(!this.getMemory().role||Game.time>this.getMemory().role.lastUpdate+a){if(!!this.room.controller&&!this.room.storage&&this.pos.getRangeTo(this.room.controller)<5){this.getMemory().role={lastUpdate:Game.time,value:'controller_bin'}}else if(this.pos.getRangeTo(this.pos.findClosestByRange(this.room.getSources()))<4){this.getMemory().role={lastUpdate:Game.time,value:'source_bin'}}else{this.getMemory().role={lastUpdate:Game.time,value:'none'}}}return this.getMemory().role.value}catch(ex){console.log('### EXCEPTION - StructureContainer.prototype.role(): '+ex.message)}};StructureController.prototype.getLink=function(){try{if(!this.controller_link){this.controller_link={link:_.select(this.room.getLinks(),x=>x.role()=='controller')[0]}}return this.controller_link.link}catch(ex){console.log('### EXCEPTION - StructureLink.prototype.getLink(): '+ex.message)}};StructureExtension.prototype.needsEnergy=function(){try{if(!this.needs_energy){this.needs_energy=this.energyCapacity>this.energy}return this.needs_energy}catch(ex){console.log('### EXCEPTION - StructureExtension.prototype.needsEnergy(): '+ex.message)}};StructureLab.prototype.labMineralType=function(){try{if(!!Memory.settings.labs[this.room.name]&&!!Memory.settings.labs[this.room.name][this.id]){return Memory.settings.labs[this.room.name][this.id].mineral}else{return'bollocks'}}catch(ex){console.log('### EXCEPTION - StructureLab.prototype.resourceType(): '+ex.message+' '+this)}};StructureLab.prototype.role=function(){try{if(!!Memory.settings.labs[this.room.name]&&!!Memory.settings.labs[this.room.name][this.id]){return Memory.settings.labs[this.room.name][this.id].role}else{return void 0}}catch(ex){console.log('### EXCEPTION - StructureLab.prototype.role(): '+ex.message)}};StructureLab.prototype.hasResource=function(a){try{if(!this.has_resource){this.has_resource={}}if(!this.has_resource[a]){this.has_resource[a]=this.mineralType===a}return this.has_resource[a]}catch(ex){console.log('### EXCEPTION - StructureLab.prototype.hasResource(): '+ex.message)}};StructureLink.prototype.storeCapacityUsed=function(){try{if(!this.store_capacity_used){this.store_capacity_used=this.energy}return this.store_capacity_used}catch(ex){console.log('### EXCEPTION - StructureLink.prototype.storeCapacityUsed(): '+ex.message)}};StructureLink.prototype.role=function(){try{if(!this.x_role){if(!this.getMemory().x_role){if(!!this.room.storage&&this.pos.getRangeTo(this.room.storage)<5){this.getMemory().x_role='storage'}else if(!!this.room.controller&&this.pos.getRangeTo(this.room.controller)<5){this.getMemory().x_role='controller'}else{this.getMemory().x_role='none'}}this.x_role=this.getMemory().x_role}return this.x_role}catch(ex){console.log('### EXCEPTION - StructureLink.prototype.role(): '+ex.message)}};StructureLink.prototype.hasResource=function(a){try{return a===RESOURCE_ENERGY&&this.energy>0}catch(ex){console.log('### EXCEPTION - StructureLink.prototype.hasResource(): '+ex.message)}};StructureNuker.prototype.needsEnergy=function(){try{if(!this.needs_energy){this.needs_energy=this.energyCapacity>this.energy}return this.needs_energy}catch(ex){console.log('### EXCEPTION - StructureNuker.prototype.needsEnergy(): '+ex.message)}};StructureNuker.prototype.labMineralType=function(){try{return'G'}catch(ex){console.log('### EXCEPTION - StructureNuker.prototype.resourceType(): '+ex.message+' '+this)}};StructureNuker.prototype.role=()=>{try{return'input'}catch(ex){console.log('### EXCEPTION - StructureNuker.prototype.role(): '+ex.message)}};StructureNuker.prototype.hasResource=()=>{try{return!1}catch(ex){console.log('### EXCEPTION - StructureNuker.prototype.hasResource(): '+ex.message)}};StructureObserver.prototype.canObserve=function(a){try{if(!this.getMemory().can_observe){this.getMemory().can_observe={}}if(!this.getMemory().can_observe[a]){this.getMemory().can_observe[a]={value:this.observeRoom(a)==OK}}return this.getMemory().can_observe[a].value}catch(ex){console.log('### EXCEPTION - StructureObserver.prototype.canObserve(): '+ex.message)}};StructureRampart.prototype.needsRepair=function(){try{if(!this.needs_repair){this.needs_repair={value:this.hits<Memory.settings.room[this.room.name].defence_repair_threshold}}return this.needs_repair.value}catch(ex){console.log('### EXCEPTION - StructureRampart.prototype.needsRepair(): '+ex.message)}};StructureSpawn.prototype.queue=function(a=!1){try{if(!this.getMemory().spawnQueue){this.getMemory().spawnQueue=[]}if(!a){return this.getMemory().spawnQueue}else{if(a.priority==='high'){this.getMemory().spawnQueue.unshift(a)}else{this.getMemory().spawnQueue.push(a)}}}catch(ex){console.log('### EXCEPTION - StructureSpawn.prototype.queue(): '+ex.message)}};StructureSpawn.prototype.resetQueue=function(){try{this.memory.spawnQueue=[]}catch(ex){console.log('### EXCEPTION - StructureSpawn.prototype.resetQueue(): '+ex.message)}};StructureSpawn.prototype.queueSummary=function(){try{if(!this.queue_summary){this.queue_summary={};let a,b,c,i;const q=this.queue();for(i in q){if(q.hasOwnProperty(i)){a=q[i].memory.home_room;b=q[i].memory.work_class;c=q[i].memory.role;if(!this.queue_summary[a]){this.queue_summary[a]={}}if(!this.queue_summary[a][b]){this.queue_summary[a][b]={}}if(!this.queue_summary[a][b][c]){this.queue_summary[a][b][c]=1}else{this.queue_summary[a][b][c]++}}}}return this.queue_summary}catch(ex){console.log('### EXCEPTION - StructureSpawn.prototype.queueSummary(): '+ex.message)}};StructureSpawn.prototype.operate=function(){try{let a=this.queue()[0];while(!!a&&this.room.energyCapacityAvailable<a.cost){this.memory.spawnQueue.splice(0,1);a=this.queue()[0]}if(!!a&&(a.priority==='normal'&&this.room.energyAvailable>this.room.energyCapacityAvailable*0.9||a.priority==='high')){if(this.canCreateCreep(a.body)===OK){this.createCreep(a.body,a.name,a.memory);this.memory.spawnQueue.splice(0,1)}}}catch(ex){console.log('### EXCEPTION - StructureSpawn.operate(): '+ex.message)}};StructureSpawn.prototype.needsEnergy=function(){try{if(!this.needs_energy){this.needs_energy=this.energyCapacity>this.energy}return this.needs_energy}catch(ex){console.log('### EXCEPTION - StructureSpawn.prototype.needsEnergy(): '+ex.message)}};StructureStorage.prototype.hasResource=function(a){try{if(!this.has_resource){this.has_resource={}}if(!this.has_resource[a]){this.has_resource[a]=this.store[a]>0}return this.has_resource[a]}catch(ex){console.log('### EXCEPTION - StructureStorage.prototype.hasResource(): '+ex.message)}};StructureStorage.prototype.storeCapacityUsed=function(){try{if(!this.store_capacity_used){this.store_capacity_used=_.sum(this.store)}return this.store_capacity_used}catch(ex){console.log('### EXCEPTION - StructureStorage.prototype.storeCapacityUsed(): '+ex.message)}};StructureStorage.prototype.getLink=function(){try{if(!this.storage_link){this.storage_link={link:_.select(this.room.getLinks(),x=>x.role()=='storage')[0]}}return this.storage_link.link}catch(ex){console.log('### EXCEPTION - StructureStorage.prototype.getLink(): '+ex.message)}};StructureTerminal.prototype.hasResource=function(a){try{if(!this.has_resource){this.has_resource={}}if(!this.has_resource[a]){this.has_resource[a]=this.store[a]>0}return this.has_resource[a]}catch(ex){console.log('### EXCEPTION - StructureTerminal.prototype.hasResource(): '+ex.message)}};StructureTerminal.prototype.storeCapacityUsed=function(){try{if(!this.store_capacity_used){this.store_capacity_used=_.sum(this.store)}return this.store_capacity_used}catch(ex){console.log('### EXCEPTION - StructureTerminal.prototype.storeCapacityUsed(): '+ex.message)}};StructureTower.prototype.operate=function(){try{if(!!this.room.getTowerTarget()){this.attack(this.room.getTowerTarget())}else if(!!this.room.getExistingCreepsWounded()[0]){this.heal(this.room.getExistingCreepsWounded()[0])}else if(this.energy>this.energyCapacity*0.8){const a=_.min(this.room.getDefenceRepairSites(),x=>x.hits);if(this.room.energyAvailable===this.room.energyCapacityAvailable||a.hits<2000){this.repair(a)}}}catch(ex){console.log('### EXCEPTION - StructureTower.prototype.operate: '+ex.message)}};StructureWall.prototype.needsRepair=function(){try{if(!this.needs_repair){this.needs_repair={value:this.hits<Memory.settings.room[this.room.name].defence_repair_threshold}}return this.needs_repair.value}catch(ex){console.log('### EXCEPTION - StructureWall.prototype.needsRepair(): '+ex.message)}};function MineralMapping(){console.log('### MineralMapping Class contains only static methods, no need to instantiate')}MineralMapping.resourceList=()=>{try{return[RESOURCE_ENERGY,'H','O','U','K','L','Z','X','OH','KH','UL','G','UH','OU','KH','KO','LH','LO','ZH','ZO','GH','GO','UH2O','UHO2','KH2O','KHO2','LH2O','LHO2','ZH2O','ZHO2','GH2O','GHO2','XUH2O','XUHO2','XKH2O','XKHO2','XLH2O','XLHO2','XZH2O','XZHO2','XGH2O','XGHO2']}catch(ex){console.log('### EXCEPTION - MineralMapping.resourceList():'+ex.message)}};MineralMapping.getBases=a=>{try{switch(a){case'none':return['none','none'];break;case'H':return['INPUT','INPUT'];break;case'O':return['INPUT','INPUT'];break;case'U':return['INPUT','INPUT'];break;case'L':return['INPUT','INPUT'];break;case'K':return['INPUT','INPUT'];break;case'Z':return['INPUT','INPUT'];break;case'X':return['INPUT','INPUT'];break;case'OH':return[RESOURCE_HYDROGEN,RESOURCE_OXYGEN];break;case'ZK':return[RESOURCE_ZYNTHIUM,RESOURCE_KEANIUM];break;case'UL':return[RESOURCE_UTRIUM,RESOURCE_LEMERGIUM];break;case'G':return[RESOURCE_ZYNTHIUM_KEANITE,RESOURCE_UTRIUM_LEMERGITE];break;case'UH':return[RESOURCE_UTRIUM,RESOURCE_HYDROGEN];break;case'UO':return[RESOURCE_UTRIUM,RESOURCE_OXYGEN];break;case'KH':return[RESOURCE_KEANIUM,RESOURCE_HYDROGEN];break;case'KO':return[RESOURCE_KEANIUM,RESOURCE_OXYGEN];break;case'LH':return[RESOURCE_LEMERGIUM,RESOURCE_HYDROGEN];break;case'LO':return[RESOURCE_LEMERGIUM,RESOURCE_OXYGEN];break;case'ZH':return[RESOURCE_ZYNTHIUM,RESOURCE_HYDROGEN];break;case'ZO':return[RESOURCE_ZYNTHIUM,RESOURCE_OXYGEN];break;case'GH':return[RESOURCE_GHODIUM,RESOURCE_HYDROGEN];break;case'GO':return[RESOURCE_GHODIUM,RESOURCE_OXYGEN];break;case'UH2O':return[RESOURCE_UTRIUM_HYDRIDE,RESOURCE_HYDROXIDE];break;case'UHO2':return[RESOURCE_UTRIUM_OXIDE,RESOURCE_HYDROXIDE];break;case'KH2O':return[RESOURCE_KEANIUM_HYDRIDE,RESOURCE_HYDROXIDE];break;case'KHO2':return[RESOURCE_KEANIUM_OXIDE,RESOURCE_HYDROXIDE];break;case'LH2O':return[RESOURCE_LEMERGIUM_HYDRIDE,RESOURCE_HYDROXIDE];break;case'LHO2':return[RESOURCE_LEMERGIUM_OXIDE,RESOURCE_HYDROXIDE];break;case'ZH2O':return[RESOURCE_ZYNTHIUM_HYDRIDE,RESOURCE_HYDROXIDE];break;case'ZHO2':return[RESOURCE_ZYNTHIUM_OXIDE,RESOURCE_HYDROXIDE];break;case'GH2O':return[RESOURCE_GHODIUM_HYDRIDE,RESOURCE_HYDROXIDE];break;case'GHO2':return[RESOURCE_GHODIUM_OXIDE,RESOURCE_HYDROXIDE];break;case'XUH2O':return[RESOURCE_UTRIUM_ACID,RESOURCE_CATALYST];break;case'XUHO2':return[RESOURCE_UTRIUM_OXIDE,RESOURCE_CATALYST];break;case'XKH2O':return[RESOURCE_KEANIUM_ACID,RESOURCE_CATALYST];break;case'XKHO2':return[RESOURCE_KEANIUM_OXIDE,RESOURCE_CATALYST];break;case'XLH2O':return[RESOURCE_LEMERGIUM_ACID,RESOURCE_CATALYST];break;case'XLHO2':return[RESOURCE_LEMERGIUM_ALKALIDE,RESOURCE_CATALYST];break;case'XZH2O':return[RESOURCE_ZYNTHIUM_ACID,RESOURCE_CATALYST];break;case'XZHO2':return[RESOURCE_ZYNTHIUM_ALKALIDE,RESOURCE_CATALYST];break;case'XGH2O':return[RESOURCE_GHODIUM_ACID,RESOURCE_CATALYST];break;case'XGHO2':return[RESOURCE_GHODIUM_ALKALIDE,RESOURCE_CATALYST];break;default:}}catch(ex){console.log('### EXCEPTION - MineralMapping.getBases(): xxx '+ex.message)}};function SpawnOrder(a,b,c,d,f,g,h,j,k=void 0){try{this.spawn_room=a;this.home_room=b;this.work_class=c;this.role=d;this.build_level=f;this.priority=h;this.boosts=g;this.respawn_time_buffer=j;this.name=k;this.build_type=Memory.settings.creeps.roles[this.role].buildType}catch(ex){console.log('### EXCEPTION - SpawnOrder.constructor(): '+ex.message)}}SpawnOrder.prototype.getBody=function(){try{return Memory.settings.creeps.buildTypes[this.build_type][this.build_level].parts}catch(ex){console.log('### EXCEPTION - SpawnOrder.getBody(): '+ex.message)}};SpawnOrder.prototype.getCost=function(){try{return Memory.settings.creeps.buildTypes[this.build_type][this.build_level].cost}catch(ex){console.log('### EXCEPTION - SpawnOrder.getCost(): '+ex.message)}};SpawnOrder.prototype.getMemoryObject=function(){try{return{spawn_room:this.spawn_room,home_room:this.home_room,work_class:this.work_class,build_type:this.build_type,build_level:this.build_level,respawn_buffer:this.respawn_time_buffer,boosts:this.boosts,role:this.role}}catch(ex){console.log('### EXCEPTION - SpawnOrder.getMemory(): '+ex.message)}};SpawnOrder.prototype.toJson=function(){try{return{memory:this.getMemoryObject(),body:this.getBody(),cost:this.getCost(),priority:this.priority,name:void 0}}catch(ex){console.log('### EXCEPTION - SpawnOrder.toJson(): '+ex.message)}};function targetCreep(a){try{let b;if(!a.room.underAttack()){b=_.cloneDeep(Memory.settings.creeps.roles[a.role()].peaceTasks)}else{b=_.cloneDeep(Memory.settings.creeps.roles[a.role()].warTasks)}let c=!1,i,d=b.length;for(i=0;i<d&&!c;i++){switch(b[i]){case'custom':c=task_custom(a);break;case'backupRestockExtensions':c=task_backupRestockExtensions(a);break;case'backupRestockTowers':c=task_backupRestockTowers(a);break;case'build':c=task_build(a);break;case'repairRoads':c=task_repairRoads(a);break;case'repairContainers':c=task_repairContainers(a);break;case'upgrade':c=task_upgrade(a);break;case'mineEnergy':c=task_mineEnergy(a);break;case'mineMineral':c=task_mineMineral(a);break;case'restockExtensions':c=task_restockExtensions(a);break;case'restockTowers':c=task_restockTowers(a);break;case'emptyMinerals':c=task_emptyMinerals(a);break;case'restockSpawn':c=task_restockSpawn(a);break;case'restockLabEnergy':c=task_restockLabEnergy(a);break;case'restockLabMinerals':c=task_restockLabMinerals(a);break;case'removeLabMinerals':c=task_removeLabMinerals(a);break;case'wait':c=task_wait(a);break;case'collectEnergy':c=task_collectEnergy(a);break;case'export':c=task_export(a);break;case'stopInvaders':c=task_stopInvaders(a);break;case'healWounded':c=task_healWounded(a);break;case'claim':c=task_claim(a);break;case'reserve':c=task_reserve(a);break;case'killKeepers':c=task_killKeepers(a);break;case'supportInvaderStopper':c=task_supportInvaderStopper(a);break;case'runaway':c=task_runaway(a);break;case'manageEnergyBalance':c=task_manageEnergyBalance(a);break;case'restockStorageLink':c=task_restockStorageLink(a);break;case'restockPowerSpawnEnergy':c=task_restockPowerSpawnEnergy(a);break;case'restockNukerEnergy':c=task_restockNukerEnergy(a);break;case'killPowerBank':c=task_killPowerBank(a);break;case'healPowerKiller':c=task_healPowerKiller(a);break;case'storePower':c=task_storePower(a);break;case'exportPower':c=task_exportPower(a);break;case'drawDownTower':c=task_drawDownTower(a);break;case'breach':c=task_breach(a);break;case'fight':c=task_fight(a);break;case'destroy':c=task_destroy(a);break;case'raze':c=task_raze(a);break;case'battleHeal':c=task_battleHeal(a);break;case'evacuateResources':c=task_evacuateResources(a);break;case'manageMineralsBetweenStorageAndTerminal':c=task_ManageMineralsBetweenStorageAndTerminal(a);break;default:console.log('targetCreep - error - invalid task passed through switch '+b[i]);}}}catch(ex){console.log('### EXCEPTION - targetCreep(): '+ex.message+' '+a)}}function assignOldEnemyInfrastructureTarget(a,b=RESOURCE_ENERGY){try{let c=[];if(a.hasBodyPart(WORK)){c=a.room.getEnemyInfrastructureTargetsNonStore()}if(!c[0]){c=_.select(a.room.getEnemyInfrastructureTargetsStore(),x=>x.hasResource(b))}a.targetGet(a.pos.findClosestByPath(c));return a.hasGetTarget()}catch(ex){console.log('### EXCEPTION - assignOldEnemyInfrastructureTarget(): '+ex.message)}}function assignSourceToMine(a){try{let b;if(a.targetedForJob()==='mineEnergy'){if(a.room.getSourcesNeedingMiner().length>0){a.targetGet(a.pos.findClosestByPath(a.room.getSourcesNeedingMiner()))}else{console.log('###  LOGIC / SETTINGS ERROR - assignSourceToMine: - no sources in the room need a miner '+a.name)}}else{b=_.select(a.room.getSources(),x=>x.energy>0);a.targetGet(a.pos.findClosestByPath(b))}}catch(ex){console.log('### EXCEPTION - assignSourceToMine(): '+ex.message)}}function commonEnergyAcquisitionTargetting(a){try{if(a.hasGetTarget()&&!!a.targetGet().store&&a.targetGet().store.energy===0){a.deallocate('get')}if(!a.isFull()&&!a.hasGetTarget()){let b=a.room.getDroppedEnergy();b=b.concat(a.room.getWithdrawlTargets());a.targetGet(a.pos.findClosestByPath(b));if(!a.hasGetTarget()){a.targetGet(a.room.storageWithMostEnergy())}if(!a.hasGetTarget()&&a.hasBodyPart(WORK)){assignSourceToMine(a)}}}catch(ex){console.log('### EXCEPTION - commonEnergyAcquisitionTargetting: '+ex.message)}}function gathererEnergyAcquisitionTargetting(a){try{if(a.hasGetTarget()&&!!a.targetGet().store&&!a.targetGet().store.energy){a.deallocate('get')}if(!a.isFull()&&!a.hasGetTarget()){if(!a.hasGetTarget()&&a.hasBodyPart(WORK)&&a.role()!=='exportMaintainer'){assignSourceToMine(a)}if(!a.hasGetTarget()){assignOldEnemyInfrastructureTarget(a)}if(!a.hasGetTarget()){let b=a.room.getDroppedEnergy();b=b.concat(a.room.getWithdrawlTargets());a.targetGet(a.pos.findClosestByPath(b))}}}catch(ex){console.log('### EXCEPTION - commonEnergyAcquisitionTargetting: '+ex.message)}}function task_backupRestockExtensions(a){let b='backupRestockExtensions';try{let c=!1;if(a.room.isShortOfCarriers()){c=task_restockExtensions(a)}return c}catch(ex){console.log('### EXCEPTION - task_backupRestockExtensions(): '+ex.message)}}function task_backupRestockTowers(a){let b='backupRestockTowers';try{let c=!1;if(a.role()==='worker'&&a.room.isShortOfManagers()&&a.room.isShortOfCarriers()||a.role()==='carrier'&&a.room.isShortOfManagers()){c=task_restockTowers(a)}return c}catch(ex){console.log('### EXCEPTION - task_backupRestockTowers(): '+ex.message)}}function task_custom(a){let b='custom';try{let c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);if(!a.isFull()&&(a.pos.x===0||a.room.name!=='W67S58')){a.moveTo(Game.flags.W67S58_in_1)}a.targetGiveId('5897fbaccce2ec2447fba7a8');a.targetGetId('580be21a76fefcdc5fa180f8');a.resourceToWithdraw('O');return c}catch(ex){console.log('### EXCEPTION - task_custom(): '+ex.message)}}function task_build(a){let b='build';try{let c=!1,d=a.room.getConstructionSites();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(a.pos.findClosestByPath(d))}if(a.workClass()==='gatherer'){gathererEnergyAcquisitionTargetting(a)}else{commonEnergyAcquisitionTargetting(a)}}}return c}catch(ex){console.log('### EXCEPTION - task_build(): '+ex.message)}}function task_repairRoads(a){let b='repairRoads';try{let c=!1,d=a.room.getRoadsNeedingRepair();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}if(a.hasGiveTarget()&&a.targetGive().hits===a.targetGive().hitsMax){a.deallocate('give')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(!a.hasGiveTarget()){let f=_.min(a.room.getRoadsNeedingRepair(),x=>x.hits);if(f.hits<f.hitsMax/2){a.targetGive(f)}else{a.targetGive(a.pos.findClosestByPath(d))}}if(a.workClass()==='gatherer'){gathererEnergyAcquisitionTargetting(a)}else{commonEnergyAcquisitionTargetting(a)}}}return c}catch(ex){console.log('### EXCEPTION - task_repairRoads(): '+ex.message)}}function task_repairContainers(a){let b='repairContainers';try{let c=!1,d=a.room.getContainersNeedingRepair();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.hasGiveTarget()&&a.targetGive().hits===a.targetGive().hitsMax){a.deallocate('give')}if(a.isFull()){if(!a.hasGiveTarget()){a.targetGive(_.min(a.room.getContainersNeedingRepair(),x=>x.hits))}}else{if(!a.hasGetTarget()){if(a.workClass()==='gatherer'){gathererEnergyAcquisitionTargetting(a)}else{commonEnergyAcquisitionTargetting(a)}}}}}return c}catch(ex){console.log('### EXCEPTION - task_repairContainers(): '+ex.message)}}function task_restockExtensions(a){let b='task_restockExtensions';try{let c=!1,d=a.room.getExtensionsNeedingEnergy();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(a.pos.findClosestByPath(d))}commonEnergyAcquisitionTargetting(a)}}return c}catch(ex){console.log('### EXCEPTION - task_task_restockExtensions(): '+ex.message)}}function task_restockPowerSpawnEnergy(a){let b='restockPowerSpawnEnergy';try{let c=!1;if(a.room.powerSpawnNeedsEnergy()){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(a.room.getPowerSpawn())}commonEnergyAcquisitionTargetting(a)}}return c}catch(ex){console.log('### EXCEPTION - task_restockPowerSpawnEnergy(): '+ex.message)}}function task_restockNukerEnergy(a){let b='restockNukerEnergy';try{let c=!1;if(a.room.nukerNeedsEnergy()){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(a.room.getNuker())}commonEnergyAcquisitionTargetting(a)}}return c}catch(ex){console.log('### EXCEPTION - task_restockNukerEnergy(): '+ex.message)}}function task_restockLabEnergy(a){let b='restockLabEnergy';try{let c=!1,d=a.room.getLabsNeedingEnergy();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()){a.targetGive(a.pos.findClosestByPath(d))}else{commonEnergyAcquisitionTargetting(a)}}}return c}catch(ex){console.log('### EXCEPTION - task_restockLabEnergy(): '+ex.message)}}function task_export(a){let b='export';try{let c=!1,d=Memory.settings.gathering[a.homeRoom()];if(!!d){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);if(!a.hasGiveTarget()){a.targetGiveId(d.exportTargetId)}if(a.room.name===a.homeRoom()){commonEnergyAcquisitionTargetting(a)}}return c}catch(ex){console.log('### EXCEPTION - task_export(): '+ex.message)}}function task_upgrade(a){let b='upgrade';try{let c=!1,d=a.room.controller;if(!!d&&(!a.room.isEnergyCritical()||d.ticksToDowngrade<1000)){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!1,!0);a.resourceToWithdraw('energy');if(!a.hasGiveTarget()){a.targetGive(d)}if(!a.isFull()&&!a.hasGetTarget()){if(!d.getLink()||d.getLink().energy===0){commonEnergyAcquisitionTargetting(a)}else{a.targetGet(d.getLink())}}}}return c}catch(ex){console.log('### EXCEPTION - task_upgrade(): '+ex.message)}}function task_restockTowers(a){let b='restockTowers';try{let c=!1,d=a.room.getTowersNeedingEnergy();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(_.min(d,x=>x.energy))}if(!a.isFull()&&!a.hasGetTarget()){a.targetGet(a.room.storageWithMostEnergy());if(!a.hasGetTarget()||!a.targetGet().store||!a.targetGet().store.energy){a.targetGet(commonEnergyAcquisitionTargetting(a))}}}}return c}catch(ex){console.log('### EXCEPTION - task_restockTowers(): '+ex.message)}}function task_restockSpawn(a){let b='restockSpawn';try{let c=!1,d=a.room.getSpawnsNeedingEnergy();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(a.isFull()&&!a.hasGiveTarget()){a.targetGive(a.pos.findClosestByPath(d))}if(!a.isFull()&&!a.hasGetTarget()||a.hasGetTarget()&&(!a.targetGet().store||!a.targetGet().store.energy)){a.targetGet(a.room.storageWithMostEnergy());if(!a.hasGetTarget()||!a.targetGet().store||!a.targetGet().store.energy){a.targetGet(commonEnergyAcquisitionTargetting(a))}}}}return c}catch(ex){console.log('### EXCEPTION - task_restockSpawn(): '+ex.message)}}function task_collectEnergy(a){let b='collectEnergy';try{let c=!1,d=a.room.getContainersWithEnergy();d=d.concat(a.room.getDroppedEnergy());if(d.length>0&&(!!a.room.storage||!!a.room.terminal)){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw('energy');if(!a.isFull()&&!a.hasGetTarget()){a.targetGet(a.pos.findClosestByPath(d))}if(!a.hasGiveTarget()){if(!!a.room.storage){a.targetGive(a.room.storage)}else{a.targetGive(a.room.terminal)}}}}return c}catch(ex){console.log('### EXCEPTION - task_collectEnergy(): '+ex.message)}}function task_ManageMineralsBetweenStorageAndTerminal(a){let b='manageMineralsBetweenStorageAndTerminal';try{let c=!1;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);if(!a.isFull()&&!a.hasGetTarget()){const d=!!a.room.terminal,f=!!a.room.storage;if(d&&f&&a.room.isMine()){let g;for(g in a.room.storage.store){if(g!=='energy'){if(!a.room.terminal.store[g]||a.room.terminal.store[g]<5000){a.targetGet(a.room.storage);a.resourceToWithdraw(g);c=!0;break}}}if(!c){for(g in a.room.terminal.store){if(g!=='energy'){if(a.room.terminal.store[g]>7000){a.targetGet(a.room.terminal);a.resourceToWithdraw(g);c=!0;break}}}}}}}return c}catch(ex){console.log('### EXCEPTION - task_manageMineralsBetweenStorageAndTerminal(): '+ex.message)}}function task_manageEnergyBalance(a){let b='manageEnergyBalance';try{let c=!1;if(!!a.room.storage&&!!a.room.terminal){let d,f,g='energy';if(a.room.storage.store.energy>a.room.terminal.store.energy*1.05){d=a.room.storage;f=a.room.terminal;c=!0}else if(a.room.terminal.store.energy>a.room.storage.store.energy*1.05){d=a.room.terminal;f=a.room.storage;c=!0}else if(_.sum(a.room.storage.store)>a.room.storage.store.energy){let h=!0,i,j=a.room.storage.store;for(i in j){if(j.hasOwnProperty(i)&&(!j[i]||j[i]<5000)&&h){g=i;d=a.room.storage;f=a.room.terminal;c=!0;h=!1}}}if(c){if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);a.resourceToWithdraw(g);if(!a.hasGiveTarget()){a.targetGive(f)}if(!a.hasGetTarget()){a.targetGet(d)}}}}return c}catch(ex){console.log('### EXCEPTION - task_manageEnergyBalance(): '+ex.message)}}function task_mineEnergy(a){let b='mineEnergy';try{let c=!1,d=a.room.getSourcesNeedingMining();if(d.length>0){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);if(!a.hasGetTarget()){a.targetGet(a.pos.findClosestByPath(d))}if(a.isFull()&&!a.hasGiveTarget()&&a.hasGetTarget()){try{a.targetGive(a.targetGet().binsNeedingEnergy()[0])}catch(ex){if(ex.message==='a.targetGet(...).binsNeedingEnergy is not a function'){a.deallocate('get')}else{throw new Exception('Passing on in task_mineEnergy')}}}}}return c}catch(ex){console.log('### EXCEPTION - task_mineEnergy(): '+ex.message+' '+a.name)}}function task_mineMineral(a){let b=!1,c='mineMineral';const d=a.room.getMinerals()[0];try{if(!!d&&d.mineralAmount>0&&d.hasExtractor()&&a.room.totalStoredResource(d.mineralType)<50000){b=!0;a.manageCarryState(!1,!1);if(a.targetedForJob()!==c){a.targetedForJob(c);a.deallocate('all')}if(a.energy>0){a.isFull(!0)}if(a.isFull()){const f=a.room.storage||a.room.terminal||a;a.targetGive(f)}else{a.targetGet(d)}}return b}catch(ex){console.log('### EXCEPTION - task_mineMineral(): '+ex.message)}}function task_emptyMinerals(a){let b='emptyMinerals';try{let c=!1;if(a.cargoType()!=='energy'&&a.cargoType()!=='empty'){if(a.targetedForJob()!=='mineMineral'||a.isFull()){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.isFull(!0);if(!a.hasGiveTarget()){let d=_.select(a.room.getLabsNeedingTopUp(),x=>x.labMineralType()===a.cargoType());if(d.length===1){a.targetGive(d[0])}else if(d.length>1){a.targetGive(_.min(d,x=>x.mineralAmount))}else{const f=!!a.room.terminal,g=!!a.room.storage;if(g&&f){if(!a.room.terminal.store[a.cargoType()]||a.room.terminal.store[a.cargoType()]<5000){a.targetGive(a.room.terminal)}else{a.targetGive(a.room.storage)}}else if(f){a.targetGive(a.room.terminal)}else if(g){a.targetGive(a.room.storage)}else{a.targetGive(a)}}}}}return c}catch(ex){console.log('### EXCEPTION - task_emptyMinerals(): '+ex.message)}}function task_restockLabMinerals(a){let b='restockLabMinerals';try{let c=!1;if(!!a.room.terminal){let d=_.select(a.room.getLabsNeedingTopUp(),x=>!!x.room.terminal.store[x.labMineralType()]);if(d.length>0&&!task_emptyMinerals(a)){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}if(a.carry.energy>0){a.isFull(!0);a.targetGive(a.room.terminal)}else{a.isFull(!1);a.targetGet(a.room.terminal);let f=_.min(d,x=>x.mineralAmount);a.resourceToWithdraw(f.labMineralType())}}}return c}catch(ex){console.log('### EXCEPTION - task_restockLabMinerals(): '+ex.message)}}function task_removeLabMinerals(a){let b='removeLabMinerals';try{let c=!1;if(!!a.room.terminal){if(!task_emptyMinerals(a)){if(_.sum(a.carry)===0){let d=a.room.getLabsNeedingEmptying();if(d.length>0){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}a.manageCarryState(!0,!0);let f=_.max(d,x=>x.mineralAmount);a.targetGet(f);a.resourceToWithdraw(f.mineralType)}}}}return c}catch(ex){console.log('### EXCEPTION - task_removeLabMinerals(): '+ex.message)}}function task_wait(a){let b='wait';try{if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all')}if(!task_emptyMinerals(a)){let c=Game.flags[a.room.name+'_wait'];if(!!c){if(a.pos.getRangeTo(c)>2){a.moveToPos(c)}}else{console.log('wait(): NO WAIT FLAG in '+a.room+' '+a)}return!0}}catch(ex){console.log('### EXCEPTION - task_wait(): '+ex.message)}}function task_stopInvaders(a){let b='stopInvaders';try{let c=!1,d=a.room.hostileCreepsAll();if(d.length>0){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.targetGive(a.pos.findClosestByPath(d))}return c}catch(ex){console.log('### EXCEPTION - task_stopInvaders(): '+ex.message)}}function task_healWounded(a){let b='healWounded';try{let c=!1,d=a.room.getExistingCreepsWounded();if(d.length>0){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.targetGive(a.pos.findClosestByRange(d))}return c}catch(ex){console.log('### EXCEPTION - task_healWounded(): '+ex.message)}}function task_claim(a){let b='claim';try{let c=!1;if(!!a.room.controller&&a.room.controller.level===0){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.targetGive(a.room.controller)}return c}catch(ex){console.log('### EXCEPTION - task_claim(): '+ex.message)}}function task_reserve(a){let b='reserve';try{let c=!1;if(!!a.room.controller&&a.room.controller.level===0){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.targetGive(a.room.controller)}return c}catch(ex){console.log('### EXCEPTION - task_reserve(): '+ex.message)}}function task_killKeepers(a){let b='killKeepers';try{let c=!1;if(a.room.getKeepersLairs().length>0){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}c=!0;let d,f=a.room.getGatheringSettings();if(!f){f={minerMineral:!1}}if(a.room.hostileCreepsSourceKeepers(f.mineMineral).length>0){d=a.pos.findClosestByPath(a.room.hostileCreepsSourceKeepers(f.mineMineral))}else{d=_.min(a.room.getKeepersLairs(f.minerMineral),x=>x.ticksToSpawn)}a.targetGive(d)}return c}catch(ex){console.log('### EXCEPTION - task_killKeepers(): '+ex.message)}}function task_restockStorageLink(a){let b='restockStorageLink';try{let c=!1,d;if(!!a.room.storage){d=a.room.storage.getLink()}if(!!d&&d.energy<d.energyCapacity){c=!0;if(!task_emptyMinerals(a)){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.manageCarryState(!0,!0);a.targetGive(d);a.targetGet(a.room.storageWithMostEnergy())}}return c}catch(ex){console.log('### EXCEPTION - task_restockStorageLink(): '+ex.message)}}function task_supportInvaderStopper(a){let b='supportInvaderStopper';try{let c=!1,d=_.select(a.room.creepsAll(),x=>x.isMine()&&x.role()==='invaderStopperKiller')[0];if(!!d){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}if(a.pos.getRangeTo(d)>0){a.moveToPos(d);c=!0}if(a.hits<a.hitsMax){a.targetGive(a)}else{a.targetGive(d)}return c}else{return c}}catch(ex){console.log('### EXCEPTION - task_supportInvaderStopper(): '+ex.message)}}function task_killPowerBank(a){let b='killPowerBank';try{let c=!1,d=a.room.find(FIND_STRUCTURES,{filter:x=>x.objectType()==='StructurePowerBank'})[0];if(!!d){c=!0;if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}a.targetGive(d)}return c}catch(ex){console.log('### EXCEPTION - task_killPowerBank(): '+ex.message)}}function task_healPowerKiller(a){let b='healPowerKiller';try{let c=!1,d=_.select(a.room.creepsAll(),x=>x.isMine()&&x.role()==='powerKiller'),f;if(d.length>1){f=_.min(d,x=>x.hits)}else{f=d[0]}if(!!f){if(a.targetedForJob()!==b){a.targetedForJob(b);a.deallocate('all');a.isFull(!0)}if(a.pos.getRangeTo(f)>0){a.moveToPos(f);c=!0}if(a.hits<a.hitsMax){a.targetGive(a)}else{a.targetGive(f)}}return c}catch(ex){console.log('### EXCEPTION - task_healPowerKiller(): '+ex.message)}}function task_storePower(a){let b='storePower';try{let c=!0;a.manageCarryState(!0,!0);if(a.isFull()){}else{let d=a.room.find(FIND_DROPPED_RESOURCES,{filter:x=>x.resourceType===RESOURCE_POWER})[0];if(!!d){a.targetGet(d)}else if(!d&&a.carry.power>0){a.isFull(!0)}}return c}catch(ex){console.log('### EXCEPTION - task_storePower(): '+ex.message)}}function task_exportPower(a){}function task_runaway(a){}function task_drawDownTower(){let a='drawDownTower';try{return!1}catch(ex){console.log('### EXCEPTION - task_drawDownTower(): '+ex.message)}}function task_breach(a){let b='breach';try{const c=Memory.settings.military[a.homeRoom()].orders.breach;let d=!1,i;const f=c.length;let g;for(i=0;i<f&&!d;i++){g=Game.getObjectById(c[i]);if(!!g){a.targetGive(g);a.isFull(!0);a.say('Breach');d=!0}}return d}catch(ex){console.log('### EXCEPTION - task_breach(): '+ex.message)}}function task_fight(a){let b='fight';try{let c=!1,d=a.room.hostileCreepsDangerous();if(d.length===0){d=a.room.hostileCreepsAll()}if(d.length>0){a.targetGive(a.pos.findClosestByPath(d));a.isFull(!0);a.say('Fight');c=!0}return c}catch(ex){console.log('### EXCEPTION - task_fight(): '+ex.message)}}function task_destroy(a){let b='destroy';try{const c=Memory.settings.military[a.homeRoom()].orders.destroy;let d=!1,i;const f=c.length;let g;for(i=0;i<f&&!d;i++){g=Game.getObjectById(c[i]);if(!!g){a.targetGive(g);a.isFull(!0);a.say('Destroy');d=!0}}return d}catch(ex){console.log('### EXCEPTION - task_destroy(): '+ex.message)}}function task_raze(a){let b='raze';try{const c=_.select(a.room.getEnemyInfrastructureTargetsNonStore(),x=>x.objectType()!=='StructurePowerBank'&&x.objectType()!=='StructureRampart'&&x.objectType()!=='StructureWall'&&x.objectType()!=='StructureController'&&x.objectType()!=='StructureRoad');let d=!1;if(c.length>0){a.targetGive(a.pos.findClosestByPath(c));a.isFull(!0);a.say('Raze');d=!0}return d}catch(ex){console.log('### EXCEPTION - task_raze(): '+ex.message)}}function task_battleHeal(a){let b='battleHeal';try{let c=a.room.getExistingCreepsWounded();a.isFull(!0);if(c.length>0){let d=_.min(c,x=>x.hits);a.targetGive(d)}else{c=a.room.find(FIND_MY_CREEPS,{filter:x=>x.name!==a.name});let d=a.pos.findClosestByPath(c);a.targetGive(d)}a.say(a.targetGive().name);return!0}catch(ex){console.log('### EXCEPTION - task_battleHeal(): '+ex.message)}}function task_evacuateResources(a){const b='evacuateResources';try{let c=!0;if(!a.room.storage||!a.room.terminal){a.role('manager')}else{if(!a.targetGet()||!a.targetGive()){a.targetGet(a.room.storage);a.targetGive(a.room.terminal)}a.manageCarryState(!1,!1);if(!a.isFull()){const d=_.max(a.targetGet().store);let f;for(f in a.targetGet().store){if(f!='energy'||_.size(a.targetGet().store)===1){if(a.targetGet().store[f]===d){a.resourceToWithdraw(f);break}}}}}return c}catch(ex){console.log('### EXCEPTION - task_evacuateResources(): '+ex.message)}}function Work(){console.log('### Work Class contains only static methods, no need to instantiate')}Work.doWork=a=>{try{if(!a.targetGet()&&!a.isFull()||!a.targetGive()&&a.isFull()){Work.goToWaitSpot(a);if(a.hasBodyPart(HEAL)&&a.hits<a.maxHits){a.heal(a)}}else{if(a.isFull()){Work.giveEnergy(a)}else{Work.getEnergy(a)}}}catch(ex){console.log('### EXCEPTION - Work.doWork(): '+ex.message)}};Work.goToWaitSpot=a=>{};Work.giveEnergy=a=>{try{let b;if(a.hasGiveTarget()){b=Work.baseGiveEnergyActions(a);if(b===ERR_NOT_IN_RANGE){a.moveToPos(a.targetGive().pos);b=Work.baseGiveEnergyActions(a);if(b===ERR_NOT_IN_RANGE){a.heal(a)}}if([ERR_INVALID_TARGET,ERR_FULL,ERR_NOT_ENOUGH_ENERGY].indexOf(b)>-1){a.deallocate('give')}else if(b===ERR_NO_BODYPART){a.say('No Bodypart')}}else if(a.hasBodyPart(HEAL)){a.heal(a)}}catch(ex){console.log('### EXCEPTION - Work.giveEnergy(): '+ex.message)}};Work.baseGiveEnergyActions=a=>{try{let b;const c=a.targetGive().objectType(),d=['StructureLink','StructureStorage','StructureTerminal','StructureContainer','StructureLab','StructureSpawn','StructureExtension','StructureTower','StructureNuker','StructurePowerSpawn'];if(c==='ConstructionSite'){if(a.targetGive().isMine()){b=a.build(a.targetGive());if(b===ERR_RCL_NOT_ENOUGH){a.targetGive().remove()}}else{b=a.moveTo(a.targetGive())}}else if(c.substring(0,9)==='Structure'&&a.targetGive().isMine()&&a.targetGive().hits<a.targetGive().hitsMax&&a.hasBodyPart(WORK)){b=a.repair(a.targetGive())}else if(c.substring(0,9)==='Structure'&&c!=='StructureKeeperLair'&&(!a.targetGive().isMine()||c==='StructureWall')&&a.hasBodyPart(WORK)){b=a.dismantle(a.targetGive())}else if(c.substring(0,9)==='Structure'&&c!=='StructureKeeperLair'&&(!a.targetGive().isMine()||c==='StructureWall')&&a.hasBodyPart(ATTACK)){b=a.attack(a.targetGive())}else if(d.indexOf(c)>-1&&a.targetGive().isMine()){b=a.transfer(a.targetGive(),a.cargoType());if(c==='StructureTower'&&b===0){a.deallocate('give')}if(a.targetedForJob()==='export'&&b===ERR_FULL&&a.targetGive().objectType()==='StructureLink'&&!a.room.storage==!1){b=a.targetGive(a.room.storage)}}else if(c==='StructureKeeperLair'){a.moveToPos(a.targetGive().pos);if(a.hasBodyPart(HEAL)&&a.hits<a.hitsMax){a.heal(a)}}else if(c==='StructureController'){if(a.targetGive().level===0){if(a.targetedForJob()==='claim'){b=a.claimController(a.targetGive())}else if(a.targetedForJob()==='reserve'){b=a.reserveController(a.targetGive())}}else if(a.targetGive().isMine()&&a.hasBodyPart(WORK)){b=a.upgradeController(a.targetGive())}else if(a.hasBodyPart(CLAIM)){b=a.attackController(a.targetGive())}}else if(c==='Creep'){const f=a.pos.getRangeTo(a.targetGive());if(a.hasBodyPart(HEAL)&&a.targetGive().isMine()){if(a.targetGive().hits<a.targetGive().hitsMax){b=a.heal(a.targetGive());if(b===ERR_NOT_IN_RANGE){b=a.rangedHeal(a.targetGive())}if(b===ERR_NOT_IN_RANGE){a.heal(a)}}if(f>1){a.moveTo(a.targetGive())}}else if(a.targetGiveId()===a.id){b=a.drop(a.cargoType());a.deallocate('give')}else if(a.targetGive().isHostile()){if(a.targetGive().owner.username==='SourceKeeper'){if(f>1){if(f>5&&f<8&&a.hits<a.hitsMax){a.say('heal stop');b=OK;a.heal(a)}else{b=ERR_NOT_IN_RANGE;if(a.hits<a.hitsMax){a.heal(a)}}}else{if(a.hits<a.hitsMax&&a.targetGive().getActiveBodyparts(ATTACK)>0){a.heal(a);b=OK}else{b=a.attack(a.targetGive())}}}else{let g='none',h='none';if(a.hasBodyPart(ATTACK)){b=a.attack(a.targetGive());h=b;if(b===OK){g='ATTACK'}}if(a.hasBodyPart(RANGED_ATTACK)&&(!a.hasBodyPart(ATTACK)||b!==OK)){let j=_.sum(a.room.hostileCreepsAll(),x=>a.pos.getRangeTo(x)<4);if(j>1){b=a.rangedMassAttack()}else{b=a.rangedAttack(a.targetGive())}if(b===OK){g='RANGED_ATTACK'}}if(a.hasBodyPart(HEAL)){g=='ATTACK'?a.rangedHeal(a):a.heal(a)}if(h!=='none'){b=h}}}if(b===ERR_NOT_IN_RANGE&&a.targetGive().owner.username==='Source Keeper'&&a.hits<a.maxHits&&a.pos.getRangeTo(a.targetGive())<8){a.say('heal stop');b=OK}}else if(c==='StructurePowerBank'){if(a.hits>a.hitsMax*0.75){a.say('POWER TO');b=a.attack(a.targetGive())}else{a.say('THE PEOPLE')}}return b}catch(ex){console.log('### EXCEPTION - Work.baseGiveEnergyActions(): '+ex.message)}};Work.getEnergy=a=>{try{let b=void 0;if(a.hasGetTarget()){b=Work.baseGetEnergyActions(a);if(b===ERR_NOT_IN_RANGE){a.moveToPos(a.targetGet().pos);b=Work.baseGetEnergyActions(a)}if([ERR_INVALID_TARGET,ERR_FULL,ERR_NOT_ENOUGH_ENERGY,ERR_NO_PATH].indexOf(b)>-1){a.deallocate('get')}}else if(a.hasBodyPart(HEAL)){a.heal(a)}}catch(ex){console.log('### EXCEPTION - Work.getEnergy(): '+ex.message)}};Work.baseGetEnergyActions=a=>{try{let b=!1;if(a.hasGetTarget()){let c=a.targetGet().objectType(),d=['StructureLink','StructureStorage','StructureTerminal','StructureContainer','StructureLab'];if(c==='Resource'){b=a.pickup(a.targetGet())}else if(c==='Source'||c==='Mineral'){b=a.harvest(a.targetGet())}else if(d.indexOf(c)>-1&&(a.targetGet().isMine()||a.targetGet().isHostile()&&a.targetGet().storeCapacityUsed()>0)){if(a.targetGet().hasResource(a.resourceToWithdraw())){b=a.withdraw(a.targetGet(),a.resourceToWithdraw());a.resourceToWithdraw(null)}else{b=ERR_NOT_ENOUGH_ENERGY}}else if(c.substring(0,9)==='Structure'&&a.targetGet().isHostile()){if(a.hasBodyPart(WORK)){b=a.dismantle(a.targetGet())}else{b=ERR_INVALID_TARGET}}}return b}catch(ex){console.log('### EXCEPTION - Work.baseGetEnergyActions(): '+ex.message+' '+a+' '+a.role()+' ')}};function ManagerCPU(){console.log('### ManagerCPU Class contains only static methods, no need to instantiate')}ManagerCPU.manage=()=>{try{ManagerCPU.recordCPUActivity();if(Memory.displayCPUStats.value){ManagerCPU.outputCPUStats()}}catch(ex){console.log('### EXCEPTION - ManagerCPU.manage(): '+ex.message)}};ManagerCPU.recordCPUActivity=()=>{try{const a=Game.cpu.getUsed();let b=Memory.CPU;if(a>b.MAX){b.MAX=a}b.TICKS+=1;b.TOTAL+=a;switch(Game.time%10){case 0:b.TOTAL_TICK_0+=a;break;case 1:b.TOTAL_TICK_1+=a;break;case 2:b.TOTAL_TICK_2+=a;break;case 3:b.TOTAL_TICK_3+=a;break;case 4:b.TOTAL_TICK_4+=a;break;case 5:b.TOTAL_TICK_5+=a;break;case 6:b.TOTAL_TICK_6+=a;break;case 7:b.TOTAL_TICK_7+=a;break;case 8:b.TOTAL_TICK_8+=a;break;case 9:b.TOTAL_TICK_9+=a;break;default:}}catch(ex){console.log('### EXCEPTION -  ManagerCPU.recordCPUActivity(): '+ex.message)}};ManagerCPU.outputCPUStats=()=>{try{let a=Memory.CPU,b=Game.cpu;const c=Math.ceil(a.TICKS/10);console.log('# CPU used this tick: '+b.getUsed());console.log('# CPU limit: '+b.limit);console.log('# CPU spare: '+(b.limit-b.getUsed()));console.log('# CPU tick limit: '+b.tickLimit);console.log('# CPU bucket: '+b.bucket);console.log('# CPU MAX: '+a.MAX);console.log('# CPU MEAN: '+a.TOTAL/a.TICKS);console.log('############################');console.log('# TICK 0 MEAN: '+(a.TOTAL_TICK_0/c+' over '+c+' ticks'));console.log('# TICK 1 MEAN: '+a.TOTAL_TICK_1/c);console.log('# TICK 2 MEAN: '+a.TOTAL_TICK_2/c);console.log('# TICK 3 MEAN: '+a.TOTAL_TICK_3/c);console.log('# TICK 4 MEAN: '+a.TOTAL_TICK_4/c);console.log('# TICK 5 MEAN: '+a.TOTAL_TICK_5/c);console.log('# TICK 6 MEAN: '+a.TOTAL_TICK_6/c);console.log('# TICK 7 MEAN: '+a.TOTAL_TICK_7/c);console.log('# TICK 8 MEAN: '+a.TOTAL_TICK_8/c);console.log('# TICK 9 MEAN: '+a.TOTAL_TICK_9/c);console.log('############################')}catch(ex){console.log('### EXCEPTION -  ManagerCPU.outputCPUStats(): '+ex.message)}};ManagerCPU.memorySetUp=()=>{try{if(!Memory.displayCPUStats){Memory.displayCPUStats={value:!0}}let a={};a.MAX=0;a.TICKS=0;a.TOTAL=0;a.TOTAL_TICK_0=0;a.TOTAL_TICK_1=0;a.TOTAL_TICK_2=0;a.TOTAL_TICK_3=0;a.TOTAL_TICK_4=0;a.TOTAL_TICK_5=0;a.TOTAL_TICK_6=0;a.TOTAL_TICK_7=0;a.TOTAL_TICK_8=0;a.TOTAL_TICK_9=0;a.TOTAL_TICK_0=0;Memory.CPU=a}catch(ex){console.log('### EXCEPTION -  ManagerCPU.resetCPUStats(): '+ex.message)}};function ManagerCreeps(){console.log('### ManagerCreeps Class contains only static methods, no need to instantiate')}ManagerCreeps.manage=()=>{try{const a=Game.creeps;let b,c;for(c in a){if(a.hasOwnProperty(c)){b=Game.creeps[c];if(!b.spawning){if(ManagerCreeps.needsBoost(b)){ManagerCreeps.getBoosted(b)}else{if(!ManagerCreeps.moveToCorrectRoom(b)){targetCreep(b);Work.doWork(b)}}}}}}catch(ex){console.log('### EXCEPTION - ManagerCreeps.manage(): '+ex.message)}};ManagerCreeps.needsBoost=a=>{try{let b=!1;if(a.hasBoostTarget()){b=!0}else if(a.boosts().length>0){let c;while(!c&&a.boosts().length>0){c=a.room.getBoosterLabByMineral(a.boosts()[0]);a.boosts().splice(0,1)}if(!!c){a.targetBoost(c);b=!0}}return b}catch(ex){console.log('### EXCEPTION - ManagerCreeps.needsBoost(): '+ex.message)}};ManagerCreeps.getBoosted=a=>{try{let b=a.targetBoost().boostCreep(a);a.say('Boost');if(b===ERR_NOT_IN_RANGE){a.moveToPos(a.targetBoost().pos);b=a.targetBoost().boostCreep(a)}if(b===OK||b===ERR_NOT_ENOUGH_RESOURCES){a.deallocate('boost')}}catch(ex){console.log('### EXCEPTION - ManagerCreeps.manageBoosts(): '+ex.message)}};ManagerCreeps.moveToCorrectRoom=a=>{try{const b=Memory.settings.general.roomsToEvacuate;switch(a.workClass()){case'worker':if(b.indexOf(a.homeRoom())>-1){const c=Game.flags[a.homeRoom()+'_evac'];if(a.room.name!==c.pos.roomName||a.pos.getRangeTo(c)>4){a.moveTo(c)}a.say('evac');return!0}else if(a.homeRoom()!==a.room.name){a.moveToPos(new RoomPosition(25,25,a.homeRoom()));return!0}break;case'assistant':return a.followWaypointPath(Memory.settings.assistance[a.homeRoom()].waypointPrefixIngress);break;case'gatherer':if(a.targetedForJob()==='export'&&a.isFull()){if(b.indexOf(a.spawnRoom())>-1){const c=Game.flags[a.homeRoom()+'_wait'];if(a.room.name!==c.pos.roomName||a.pos.getRangeTo(c)>4){a.moveTo(c)}a.say('evac');a.memory.waypoint.number=1;return!0}else{return a.followWaypointPath(Memory.settings.gathering[a.homeRoom()].waypointPrefixEgress)}}else{return a.followWaypointPath(Memory.settings.gathering[a.homeRoom()].waypointPrefixIngress)}break;case'powerHarvester':if(a.targetedForJob()==='exportPower'&&a.isFull()){return a.followWaypointPath(Memory.settings.powerharvest[a.homeRoom()].waypointPrefixEgress)}else{return a.followWaypointPath(Memory.settings.powerharvest[a.homeRoom()].waypointPrefixIngress)}break;case'claimer':return a.followWaypointPath(Memory.settings.claiming[a.homeRoom()].waypointPrefixIngress);break;case'military':return a.followWaypointPath(Memory.settings.military[a.homeRoom()].waypointPrefixIngress);break;default:console.log('ManagerCreeps.moveToCorrectRoom(): ERROR - unrecognised work class for '+a.name);}}catch(ex){console.log('### EXCEPTION - ManagerCreeps.moveToCorrectRoom(): '+ex.message+' '+a)}};function ManagerLabs(){console.log('### ManagerLabs Class contains only static methods, no need to instantiate')}ManagerLabs.manage=()=>{try{const a=_.select(Game.structures,x=>x.objectType()==='StructureLab'&&(x.role()==='output'||x.role()==='middle')&&x.cooldown===0&&x.mineralAmount<x.mineralCapacity);let b,c,d;for(let i in a){d=MineralMapping.getBases(a[i].labMineralType());b=_.select(a[i].room.getLabs(),x=>x.labMineralType()===d[0])[0];c=_.select(a[i].room.getLabs(),x=>x.labMineralType()===d[1])[0];if(!!b&&!!c&&b.mineralAmount>5&&c.mineralAmount>5){a[i].runReaction(b,c)}}}catch(ex){console.log('### EXCEPTION - ManagerLabs.manage(): '+ex.message)}};function ManagerLinks(){console.log('### ManagerTerminals Class contains only static methods, no need to instantiate')}ManagerLinks.manage=()=>{try{let a=_.select(Game.structures,x=>x.objectType()==='StructureLink'&&x.role()==='storage'&&x.cooldown===0&&x.energy>0);for(let i in a){let b=_.select(a[i].room.getLinks(),x=>x.role()==='controller')[0];if(!!b){a[i].transferEnergy(b)}}}catch(ex){console.log('### EXCEPTION - ManagerLinks.manage(): '+ex.message)}};function ManagerMemory(){console.log('### MemoryManager Class contains only static methods, no need to instantiate')}ManagerMemory.manageCreepMemory=()=>{try{const a=Memory.creeps;let b;for(b in a){if(a.hasOwnProperty(b)&&!Game.creeps[b]){delete Memory.creeps[b]}}let c=Memory.objectMemory.Creep,d,f;for(d in c){if(c.hasOwnProperty(d)){f=Game.getObjectById(d);if(!f){delete Memory.objectMemory.Creep[d]}}}}catch(ex){console.log('### EXCEPTION - MemoryManager.manageCreepMemory(): '+ex.message)}};function ManagerMilitary(){console.log('### ManagerCreepsMilitary Class contains only static methods, no need to instantiate')}ManagerMilitary.manage=()=>{try{}catch(ex){console.log('### EXCEPTION - ManagerCreepsWorkers.manageMilitary(): '+ex.message)}};function ManagerNukes(){console.log('### ManagerNukes Class contains only static methods, no need to instantiate')};ManagerNukes.manage=()=>{try{}catch(ex){console.log('### EXCEPTION - ManagerNukes.manage(): '+ex.message)}};function ManagerSpawn(){console.log('### ManagerSpawns Class contains only static methods, no need to instantiate')};ManagerSpawn.manageSpawnQueues=()=>{try{ManagerSpawn.queueWorkers();ManagerSpawn.queueGatherers();ManagerSpawn.queueAssistants();ManagerSpawn.queueClaimers();ManagerSpawn.queueMilitary()}catch(ex){console.log('### EXCEPTION - ManagerSpawns.manageSpawnQueues(): '+ex.message)}};ManagerSpawn.manageSpawnOperation=()=>{try{const a=_.select(Game.spawns,x=>!x.spawning&&x.queue().length>0);for(let i in a){a[i].operate()}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.manageSpawnOperation(): '+ex.message)}};ManagerSpawn.queueWorkers=()=>{try{let a='worker',b=_.select(Game.rooms,x=>!!x.controller&&x.controller.level>0&&x.isMine()),i;for(i in b){let c=b[i].name;for(let vRole in Memory.settings.room[c].creepSpawnGoals){let d=b[i].getNumCreepsRequiredByClassAndRole(c,a,vRole),f=b[i].getExistingCreepsByClassAndRole(c,a,vRole).length,g=b[i].getNumCreepsQueuedByClassAndRole(c,a,vRole),h=d-(f+g);if(h>0){let j=b[i].getSettings().creepSpawnGoals[vRole].buildLevel;if(b[i].buildLevel()<b[i].getSettings().creepSpawnGoals[vRole].buildLevel){j=b[i].buildLevel()}const k=b[i].getSettings().creepSpawnGoals[vRole].boosts,l=b[i].getSettings().creepSpawnGoals[vRole].priority,m=b[i].getSettings().respawnTimeBuffer,n=new SpawnOrder(c,c,a,vRole,j,k,l,m);b[i].queueSpawnOrderOnBestSpawn(n.toJson())}}}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.queueWorkers(): '+ex.message)}};ManagerSpawn.queueGatherers=()=>{try{let a='gatherer',b=Memory.settings.gathering;for(let vRoomName in b){if(!!b[vRoomName]&&b[vRoomName].isActiveOp){let c=b[vRoomName].providerRoom,d=Game.rooms[c];if(b[vRoomName].reserveController){let f=d.getNumCreepsQueuedByClassAndRole(vRoomName,a,'reserver'),g=d.getExistingCreepsByClassAndRole(vRoomName,a,'reserver').length;if(g+f===0){if(!!Game.rooms[vRoomName]&&!!Game.rooms[vRoomName].controller&&Game.rooms[vRoomName].controller.level===0){if(!Game.rooms[vRoomName].controller.reservation||Game.rooms[vRoomName].controller.reservation.ticksToEnd<b[vRoomName].reservationTickBuffer){let h='reserver',j=b[vRoomName].reserverBuildLevel,k=[],l='normal',m=b[vRoomName].respawnTimeBuffer,n=new SpawnOrder(c,vRoomName,a,h,j,k,l,m);d.queueSpawnOrderOnBestSpawn(n.toJson())}}}}for(let vRole in b[vRoomName].creepSpawnGoals){let f=d.getNumCreepsRequiredByClassAndRole(vRoomName,a,vRole),g=d.getExistingCreepsByClassAndRole(vRoomName,a,vRole).length,h=d.getNumCreepsQueuedByClassAndRole(vRoomName,a,vRole),j=f-(g+h);if(j>0){let k=b[vRoomName].creepSpawnGoals[vRole].buildLevel;if(d.buildLevel()<b[vRoomName].creepSpawnGoals[vRole].buildLevel){k=d.buildLevel()}let l=b[vRoomName].creepSpawnGoals[vRole].boosts,m=b[vRoomName].creepSpawnGoals[vRole].priority,n=b[vRoomName].respawnTimeBuffer,o=new SpawnOrder(c,vRoomName,a,vRole,k,l,m,n);d.queueSpawnOrderOnBestSpawn(o.toJson());j--}}}}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.queueGatherers(): '+ex.message)}};ManagerSpawn.queueAssistants=()=>{try{let a='assistant',b=Memory.settings.assistance,c=2;for(let vRoomName in b){if(!!b[vRoomName]&&b[vRoomName].isActiveOp){let d=b[vRoomName].providerRoom,f=Game.rooms[d];for(let vRole in b[vRoomName].creepSpawnGoals){let g=f.getNumCreepsRequiredByClassAndRole(vRoomName,a,vRole),h=f.getExistingCreepsByClassAndRole(vRoomName,a,vRole).length,j=f.getNumCreepsQueuedByClassAndRole(vRoomName,a,vRole),k=g-(h+j);if(k>0){let l=b[vRoomName].creepSpawnGoals[vRole].buildLevel;if(f.buildLevel()<b[vRoomName].creepSpawnGoals[vRole].buildLevel){l=f.buildLevel()}let m=b[vRoomName].creepSpawnGoals[vRole].boosts,n=b[vRoomName].creepSpawnGoals[vRole].priority,o=b[vRoomName].respawnTimeBuffer,p=new SpawnOrder(d,vRoomName,a,vRole,l,m,n,o);f.queueSpawnOrderOnBestSpawn(p.toJson())}}}}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.queueAssistants(): '+ex.message)}};ManagerSpawn.queueClaimers=()=>{try{let a='claimer',b=Memory.settings.claiming,c=3;for(let vRoomName in b){if(b[vRoomName].isActiveOp&&(!Game.rooms[vRoomName]||!!Game.rooms[vRoomName].controller&&Game.rooms[vRoomName].controller.level===0)){let d=b[vRoomName].providerRoom,f=Game.rooms[d],g='claimer',h=1,j=f.getExistingCreepsByClassAndRole(vRoomName,a,g).length,k=f.getNumCreepsQueuedByClassAndRole(vRoomName,a,g),l=h-(j+k);if(l>0){let m=b[vRoomName].claimer_buildLevel,n=[],o='high',p=0,r=new SpawnOrder(d,vRoomName,a,g,m,n,o,p);f.queueSpawnOrderOnBestSpawn(r.toJson())}}}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.queueClaimers(): '+ex.message)}};ManagerSpawn.queueMilitary=()=>{try{let a='military',b=Memory.settings.military,c,d,f,g,h,j,k,l,m,n,o,p,r,s;for(c in b){if(b.hasOwnProperty(c)&&!!b[c]&&b[c].isActiveOp){d=b[c].providerRoom;f=Game.rooms[d];h=b[c].creepSpawnGoals;for(g in h){if(h.hasOwnProperty(g)){j=f.getNumCreepsRequiredByClassAndRole(c,a,g);k=f.getExistingCreepsByClassAndRole(c,a,g).length;l=f.getNumCreepsQueuedByClassAndRole(c,a,g);m=j-(k+l);if(m>0){n=h[g].buildLevel;if(f.buildLevel()<h[g].buildLevel){n=f.buildLevel()}o=h[g].boosts;p=h[g].priority;r=b[c].respawnTimeBuffer;s=new SpawnOrder(d,c,a,g,n,o,p,r);f.queueSpawnOrderOnBestSpawn(s.toJson())}}}}}}catch(ex){console.log('### EXCEPTION - ManagerSpawns.queueMilitary(): '+ex.message)}};function ManagerTerminals(){console.log('### ManagerTerminals Class contains only static methods, no need to instantiate')}ManagerTerminals.manage=()=>{try{let i;const a=Memory.settings.general.evacuateResources;for(i=0;i<a.length;i++){Game.rooms[a[i]].evacuateResources()}}catch(ex){console.log('ERROR - EVACUATING c '+ex.message)}try{const a=Memory.settings.general.terminalsDistributeMinerals,b=Memory.settings.general.terminalsDistributeEnergy;if(b||a){const c=Memory.settings.general.terminalsToExclude,d=MineralMapping.resourceList()[Game.time%MineralMapping.resourceList().length],f=_.select(Game.structures,x=>x.objectType()==='StructureTerminal'&&x.isMine()&&!!x.room.controller&&x.room.controller.level>=6&&c.indexOf(x.id)===-1);if(d!=='energy'){if(a){let g=_.select(f,x=>!!x.store[d]&&!x.room.usesMineral(d)&&x.store[d]>100);if(g.length===0){g=_.select(f,x=>x.room.usesMineral(d)&&x.room.totalStoredResource(d)>5000)}if(g.length>0){let h=_.select(f,x=>x.room.usesMineral(d)&&x.room.totalStoredResource(d)<5000);if(h.length>0){let j=_.select(h,x=>!x.store[d])[0];if(!j){j=_.min(h,x=>x.store[d])}let k=_.max(g,x=>x.store[d]),l;try{l=k.room.name}catch(e){k=g[0];l=k.room.name}if(j.room.name!==l){let m,n=k.store[d];if(k.room.usesMineral(d)){let o=k.room.totalStoredResource(d);if(o<10000){m=o-5000}else{m=5000}if(m>n){m=n}}else{if(n<5000){m=n}else{m=5000}}k.send(d,m,j.room.name)}}}}}else{if(b){let g=_.sum(f,x=>x.store[d])/f.length,h=_.max(f,x=>x.store[d]),j=_.select(f,x=>!x.store[d]),k;if(j.length>0){k=j[0]}else{k=_.min(f,x=>x.store[d])}let l=h.store[d]-g,m=g;if(!!k.store[d]){m=g-k.store[d]}if(l>m){l=m}if(k.storeCapacityUsed()+l>k.storeCapacity){l=k.storeCapacity-k.storeCapacityUsed()}if(l>5000){h.send(d,l,k.room.name)}}}}}catch(ex){console.log('### EXCEPTION - ManagerTerminals.manage(): '+ex.message+' '+vMineralToCheck)}};function ManagerTowers(){console.log('### ManagerTowers Class contains only static methods, no need to instantiate')}ManagerTowers.manage=()=>{try{let a=_.select(Game.structures,x=>x.objectType()==='StructureTower');for(let i in a){a[i].operate()}}catch(ex){console.log('### EXCEPTION - ManagerTowers.manageTowers(): '+ex.message)}};module.exports.loop=()=>{try{console.log('  ');const a=Game.time%10;console.log('######   TICK '+Game.time+' '+a+' ######');ManagerTowers.manage();ManagerCreeps.manage();switch(a){case 1:ManagerMemory.manageCreepMemory();break;case 2:if(!Memory.settings||Memory.settings.lastUpdated!==update_datetime){updateSettings()}break;case 3:ManagerSpawn.manageSpawnQueues();break;case 4:ManagerLinks.manage();break;case 5:ManagerLabs.manage();break;case 6:ManagerSpawn.manageSpawnOperation();break;case 7:break;case 8:break;case 9:break;case 0:const vBigMod=Game.time%100;switch(vBigMod){case 0:console.log('!! ENERGY SUMMARY');const vStores=_.select(Game.structures,x=>(x.objectType()==='StructureStorage'||x.objectType()==='StructureTerminal')&&x.isMine()&&!!x.store.energy),vNewTotal=_.sum(vStores,x=>x.store.energy);console.log('total energy - old total: '+Memory.old_energy_total+' new total: '+vNewTotal+' difference: '+(vNewTotal-Memory.old_energy_total).toString());Memory.old_energy_total=vNewTotal;break;case 50:console.log('!! BRINGING MEMORY BACK INTO CONTROL');updateSettings();break;default:}break;default:}ManagerTerminals.manage();ManagerCPU.manage();Game.resetCPUStats=()=>{try{ManagerCPU.memorySetUp();return'*** CPU STATS RESET *****'}catch(ex){console.log('### EXCEPTION -  resetCPUStats(): '+ex.message)}};Game.toggleCPUStats=()=>{try{let b=Memory.displayCPUStats||{value:!1};Memory.displayCPUStats={value:!b.value};return'CPU Stat display toggled'}catch(ex){console.log('### EXCEPTION -  toggleCPUStats(): '+ex.message)}}}catch(ex){console.log('### EXCEPTION - Main: '+ex.message)}};